webpackJsonp([31],{1059:function(e,t,o){t=e.exports=o(6)(),t.push([e.i,".spec_list[data-v-5fd12fe7]{margin-top:10px}.pg_property[data-v-5fd12fe7]{margin-right:5px}.input-new-property[data-v-5fd12fe7]{width:70px}",""])},1135:function(e,t,o){"use strict";function i(e){o(1395)}var r=o(766),l=o(1279),s=o(2),n=i,a=s(r.a,l.a,n,"data-v-5fd12fe7",null);t.a=a.exports},1136:function(e,t,o){"use strict";var i=o(767),r=o(1275),l=o(2),s=l(i.a,r.a,null,null,null);t.a=s.exports},1254:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("pg-content",[o("pg-search-form",{attrs:{"reset-form":e.query,"default-form":e.defaultQuery,more:e.moreQuery,"is-show-more":e.isShowMoreQuery},on:{openMore:e.toggleOpen,search:e.search},slot:"search-form",model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),o("pg-operations",{attrs:{btns:e.operations},on:{add:e.add,put:e.put,pull:e.pull,copy:e.copy},slot:"operations"}),e._v(" "),o("pg-table",{attrs:{list:e.goodsList},on:{"select-change":e.selectChange,edit:e.edit,del:e.del},slot:"list-table"}),e._v(" "),o("pg-pagination",{attrs:{"page-size":e.query.pageSize,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange},slot:"pagination"}),e._v(" "),o("pg-edit",{attrs:{title:e.editTitle,show:e.showEdit,isEdit:e.isEdit,editForm:e.editForm},on:{close:e.closeEdit}})],1)},r=[],l={render:i,staticRenderFns:r};t.a=l},1275:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:"getPageList"===e.localLoading,expression:"localLoading === 'getPageList'"}],staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"拼命加载中","highlight-current-row":"",border:"",stripe:""},on:{"selection-change":e.selectChange}},[o("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"name",label:"商品名称","min-width":"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"stockQty",label:"库存","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间",width:"250"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pg-button-group",[o("pg-button",{attrs:{title:"编辑"},on:{click:function(o){e.edit(t.row)}}}),e._v(" "),o("pg-button",{attrs:{title:"删除",confirm:""},on:{click:function(o){e.del(t.row)}}})],1)]}}])})],1)},r=[],l={render:i,staticRenderFns:r};t.a=l},1279:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[o("div",{staticClass:"box_title"},[e._v(e._s(e.title))]),e._v(" "),o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"商品信息",name:"info"}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[o("pg-title",{attrs:{title:"基本信息"}}),e._v(" "),o("el-form-item",{attrs:{label:"商品类目"}},[o("el-cascader",{attrs:{options:e.treeList},on:{change:e.changeTreeList},model:{value:e.deptId,callback:function(t){e.deptId=t},expression:"deptId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"品牌名称"}},[o("el-select",{attrs:{"allow-create":"",filterable:"",placeholder:"请选择"},model:{value:e.form.brandId,callback:function(t){e.form.brandId=t},expression:"form.brandId"}},e._l(e.brandList,function(e){return o("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"供应商名称"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.venderId,callback:function(t){e.form.venderId=t},expression:"form.venderId"}},e._l(e.supplierList,function(e){return o("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"商品类型"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.wholesaleFlag,callback:function(t){e.form.wholesaleFlag=t},expression:"form.wholesaleFlag"}},e._l(e.wholesaleType,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"商品标签"}},[o("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.goodsTags,callback:function(t){e.form.goodsTags=t},expression:"form.goodsTags"}},e._l(e.goodsFlagList,function(e){return o("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1),e._v(" "),o("pg-title",{attrs:{title:"SKU"}}),e._v(" "),o("el-form-item",{attrs:{label:"商品规格"}},[o("el-button",{attrs:{type:"primary",icon:"plus",size:"small"},on:{click:e.addSpec}},[e._v("添加规格项目")]),e._v(" "),o("div",{staticClass:"spec_list"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-input",{model:{value:e.form.colorName,callback:function(t){e.form.colorName=t},expression:"form.colorName"}})],1),e._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{size:"small"},on:{click:e.submitSpec}},[e._v("确定")])],1),e._v(" "),o("el-col",{attrs:{span:16}},[o("el-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){e.delSpec(0)}}},[e._v("删除")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[e._l(e.form.colorProperties,function(t,i){return o("el-tag",{key:t.name,staticClass:"pg_property",attrs:{closable:!0,"close-transition":!1},on:{close:function(t){e.delProperty(e.form.colorProperties,i)}}},[e._v("\n                                       "+e._s(t.name)+"\n                                   ")])}),e._v(" "),e.inputVisibleColor?o("el-input",{ref:"savePropertyInput",staticClass:"input-new-property",attrs:{size:"mini"},on:{blur:function(t){e.addProperty(e.form.colorProperties)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.addProperty(e.form.colorProperties)}},model:{value:e.inputValueColor,callback:function(t){e.inputValueColor=t},expression:"inputValueColor"}}):o("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:function(t){e.showPropertyInput(0)}}},[e._v("\n                                           + 新增属性\n                                       ")])],2)],1)],1),e._v(" "),o("div",{staticClass:"spec_list"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-input",{model:{value:e.form.sizeName,callback:function(t){e.form.sizeName=t},expression:"form.sizeName"}})],1),e._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{size:"small"},on:{click:e.submitSpec}},[e._v("确定")])],1),e._v(" "),o("el-col",{attrs:{span:16}},[o("el-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){e.delSpec(1)}}},[e._v("删除")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[e._l(e.form.sizeProperties,function(t,i){return o("el-tag",{key:t.name,staticClass:"pg_property",attrs:{closable:!0,"close-transition":!1},on:{close:function(t){e.delProperty(e.form.sizeProperties,i)}}},[e._v("\n                                       "+e._s(t.name)+"\n                                   ")])}),e._v(" "),e.inputVisibleSize?o("el-input",{ref:"savePropertyInput",staticClass:"input-new-property",attrs:{size:"mini"},on:{blur:function(t){e.addProperty(e.form.sizeProperties)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.addProperty(e.form.sizeProperties)}},model:{value:e.inputValueSize,callback:function(t){e.inputValueSize=t},expression:"inputValueSize"}}):o("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:function(t){e.showPropertyInput(1)}}},[e._v("\n                                           + 新增属性\n                                       ")])],2)],1)],1),e._v(" "),o("div",{staticClass:"spec_list"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-input",{model:{value:e.form.otherName,callback:function(t){e.form.otherName=t},expression:"form.otherName"}})],1),e._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{size:"small"},on:{click:e.submitSpec}},[e._v("确定")])],1),e._v(" "),o("el-col",{attrs:{span:16}},[o("el-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){e.delSpec(2)}}},[e._v("删除")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[e._l(e.form.otherProperties,function(t,i){return o("el-tag",{key:t.name,staticClass:"pg_property",attrs:{closable:!0,"close-transition":!1},on:{close:function(t){e.delProperty(e.form.otherProperties,i)}}},[e._v("\n                                       "+e._s(t.name)+"\n                                   ")])}),e._v(" "),e.inputVisibleOther?o("el-input",{ref:"savePropertyInput",staticClass:"input-new-property",attrs:{size:"mini"},on:{blur:function(t){e.addProperty(e.form.otherProperties)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.addProperty(e.form.otherProperties)}},model:{value:e.inputValueOther,callback:function(t){e.inputValueOther=t},expression:"inputValueOther"}}):o("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:function(t){e.showPropertyInput(2)}}},[e._v("\n                                           + 新增属性\n                                       ")])],2)],1)],1)],1),e._v(" "),o("br"),e._v(" "),o("el-form-item",{attrs:{label:"商品库存"}},[o("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.form.skus,border:""}},[o("el-table-column",{attrs:{resizable:"",fixed:"",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"mini",icon:"delete"},on:{click:function(o){e.delSku(t.$index)}}})]}}])}),e._v(" "),e.form.colorName?o("el-table-column",{attrs:{label:e.form.colorName,prop:"colorName"}}):e._e(),e._v(" "),e.form.sizeName?o("el-table-column",{attrs:{label:e.form.sizeName,prop:"sizeName"}}):e._e(),e._v(" "),e.form.otherName?o("el-table-column",{attrs:{label:e.form.otherName,prop:"otherName"}}):e._e(),e._v(" "),o("el-table-column",{attrs:{label:"零售价(元)"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.price,callback:function(t){e.row.price=t},expression:"scope.row.price"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"成本价(元)"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.basePrice,callback:function(t){e.row.basePrice=t},expression:"scope.row.basePrice"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"商品编码"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.code,callback:function(t){e.row.code=t},expression:"scope.row.code"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"条形码"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.barcode,callback:function(t){e.row.barcode=t},expression:"scope.row.barcode"}})]}}])})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"商品货号"}},[o("el-input",{model:{value:e.form.customNo,callback:function(t){e.form.customNo=t},expression:"form.customNo"}})],1),e._v(" "),o("pg-title",{attrs:{title:"商品信息"}}),e._v(" "),o("el-form-item",{attrs:{label:"零售价"}},[o("el-input",{attrs:{placeholder:"0.00"},model:{value:e.form.price,callback:function(t){e.form.price=t},expression:"form.price"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"商品主图"}},[o("pg-img-upload",{attrs:{image:e.form.imgUrl},on:{success:e.uploadSuccess}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品副图"}},[o("pg-img-upload",{attrs:{multiple:"",imageList:e.form.imgUrls},on:{success:e.uploadMultipleSuccess}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品简介"}},[o("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.form.note,callback:function(t){e.form.note=t},expression:"form.note"}})],1),e._v(" "),o("pg-title",{attrs:{title:"物流及其他"}}),e._v(" "),o("el-form-item",{attrs:{label:"固定运费"}},[o("el-input",{attrs:{placeholder:"0.00"},model:{value:e.form.postFee,callback:function(t){e.form.postFee=t},expression:"form.postFee"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"运费模板"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.freightTemplateId,callback:function(t){e.form.freightTemplateId=t},expression:"form.freightTemplateId"}},e._l(e.freightTemplateList,function(e){return o("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"长度"}},[o("el-input",{model:{value:e.form.long,callback:function(t){e.form.long=t},expression:"form.long"}},[o("template",{slot:"append"},[e._v("cm")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"宽度"}},[o("el-input",{model:{value:e.form.width,callback:function(t){e.form.width=t},expression:"form.width"}},[o("template",{slot:"append"},[e._v("cm")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"高度"}},[o("el-input",{model:{value:e.form.height,callback:function(t){e.form.height=t},expression:"form.height"}},[o("template",{slot:"append"},[e._v("cm")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"物流重量"}},[o("el-input",{model:{value:e.form.weight,callback:function(t){e.form.weight=t},expression:"form.weight"}},[o("template",{slot:"append"},[e._v("kg")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"上架时间"}},[o("el-radio-group",{model:{value:e.form.stockStatus,callback:function(t){e.form.stockStatus=t},expression:"form.stockStatus"}},[o("el-radio",{attrs:{label:1}},[e._v("立即上架")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("暂不上架")])],1)],1),e._v(" "),o("el-form-item",{staticClass:"el-form-item_btns"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.next}},[e._v("下一步")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"商品详情",name:"detail"}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules,inline:""}},[o("el-form-item",[o("pg-editor",{ref:"contentEditor",attrs:{"init-content":e.content},model:{value:e.form.content,callback:function(t){e.form.content=t},expression:"form.content"}})],1),e._v(" "),o("el-form-item",{staticClass:"el-form-item_btns"},[o("el-button",{attrs:{size:"small",type:"primary",loading:"saveGoods"===e.localLoading},on:{click:e.save}},[e._v("\n                           保存\n                       ")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("\n                           返回\n                       ")])],1)],1)],1)],1)],1)},r=[],l={render:i,staticRenderFns:r};t.a=l},1395:function(e,t,o){var i=o(1059);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(16)("68f29418",i,!0)},256:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(768),r=o(1254),l=o(2),s=l(i.a,r.a,null,null,null);t.default=s.exports},766:function(e,t,o){"use strict";var i=o(1),r=o.n(i),l=o(915);t.a=r()({},l.a)},767:function(e,t,o){"use strict";var i=o(1),r=o.n(i),l=o(916);t.a=r()({},l.a)},768:function(e,t,o){"use strict";var i=o(1),r=o.n(i),l=o(917);t.a=r()({},l.a)},915:function(e,t,o){"use strict";var i=o(1),r=o.n(i),l=o(46),s=(o.n(l),o(30)),n=o(9);t.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object},data:function(){return{form:{},initForm:{goodsId:"",deptId:"",name:"",brandId:"",brandName:"",venderId:"",wholesaleFlag:0,goodsTags:[],colorName:"",sizeName:"",otherName:"",colorProperties:[],sizeProperties:[],otherProperties:[],skus:[],customNo:"",price:"",imgUrl:"",imgUrls:[],note:"",postFee:"",freightTemplateId:"",long:"",width:"",height:"",weight:"",stockStatus:1,gradePrice:[],content:""},sku:{barcodeId:"",colorId:"",colorName:"",sizeId:"",sizeName:"",otherId:"",otherName:"",price:"",basePrice:"",code:"",barcode:""},deptId:[],content:"",activeName:"info",inputVisibleColor:!1,inputValueColor:"",inputVisibleSize:!1,inputValueSize:"",inputVisibleOther:!1,inputValueOther:"",addPropertyType:0,treeList:[],supplierList:[],brandList:[],goodsFlagList:[],freightTemplateList:[],wholesaleType:[{label:"零售",value:0},{label:"批发",value:1}]}},computed:r()({},o.i(n.mapGetters)(["localLoading"])),watch:{editForm:function(e){this.setForm(this.editForm)},"form.colorProperties":function(){this.createSku()},"form.sizeProperties":function(){this.createSku()},"form.otherProperties":function(){this.createSku()},treeList:function(){this.isEdit&&this.setGoodsTree()}},mounted:function(){this.isEdit||this.resetForm(),this.getGoodsTree(),this.getSupplierList(),this.getBrandList(),this.getGoodsFlagList(),this.getFreightTemplateList()},created:function(){this.setForm(this.editForm)},methods:{resetForm:function(){this.form=o.i(l.cloneDeep)(this.initForm),this.content=""},setForm:function(e){var t=this;this.isEdit?(this.form=o.i(l.cloneDeep)(this.editForm),this.content=this.form.content,this.treeList.length>0&&this.setGoodsTree()):this.resetForm(),this.$nextTick(function(){t.$refs.contentEditor&&t.$refs.contentEditor.updateEditor()})},getSupplierList:function(){var e=this;s.a.getSupplierList().then(function(t){e.supplierList=t})},getBrandList:function(){var e=this;s.a.getBrandList().then(function(t){e.brandList=t})},getGoodsFlagList:function(){var e=this;s.a.getGoodsFlagList().then(function(t){e.goodsFlagList=t})},getFreightTemplateList:function(){var e=this;s.a.getFreightTemplateList().then(function(t){e.freightTemplateList=t})},getGoodsTree:function(){var e=this,t=[];s.e.getGoodsTree().then(function(o){o.forEach(function(e){var o={value:e.deptID,label:e.name,children:[]};e.subItems.forEach(function(e){var t={value:e.deptID,label:e.name,children:[]};e.subItems.forEach(function(e){var o={value:e.deptID,label:e.name,children:[]};e.subItems.forEach(function(e){var t={value:e.deptID,label:e.name};o.children.push(t)}),t.children.push(o)}),o.children.push(t)}),t.push(o)}),e.treeList=t})},setGoodsTree:function(){var e=this;this.treeList.forEach(function(t){t.children.forEach(function(o){o.children.forEach(function(i){i.children.forEach(function(r){e.form.deptId==r.value&&(e.deptId.push(t.value),e.deptId.push(o.value),e.deptId.push(i.value),e.deptId.push(r.value))})})})})},changeTreeList:function(e){this.form.deptId=e[e.length-1]},addSpec:function(){this.specList.push({name:"",properties:[]})},delSpec:function(e){0==e?(this.form.sizeName="",this.form.sizeProperties=[]):0==e?(this.form.colorName="",this.form.colorProperties=[]):(this.form.otherName="",this.form.otherProperties=[])},submitSpec:function(){},showPropertyInput:function(e){this.addPropertyType=e,0==this.addPropertyType?this.inputVisibleColor=!0:1==this.addPropertyType?this.inputVisibleSize=!0:this.inputVisibleOther=!0},addProperty:function(e){var t="";t=0==this.addPropertyType?this.inputValueColor:1==this.addPropertyType?this.inputValueSize:this.inputValueOther,t&&e.push({id:"",name:t}),0==this.addPropertyType?(this.inputVisibleColor=!1,this.inputValueColor=""):1==this.addPropertyType?(this.inputVisibleSize=!1,this.inputValueSize=""):(this.inputVisibleOther=!1,this.inputValueOther="")},delProperty:function(e,t){e.splice(t,1)},createSku:function(){var e=this,t=[];this.form.colorProperties.length>0&&this.form.colorProperties.forEach(function(i){if(e.form.sizeProperties.length>0)e.form.sizeProperties.forEach(function(r){if(e.form.otherProperties.length>0)e.form.otherProperties.forEach(function(s){var n=e.selectEqualSku(i.id,r.id,s.id);if(e.util.isEmptyObject(n)){var a=o.i(l.cloneDeep)(e.sku);a.colorName=i.name,a.sizeName=r.name,a.otherName=s.name,t.push(a)}else t.push(n)});else{var s=e.selectEqualSku(i.id,r.id);if(e.util.isEmptyObject(s)){var n=o.i(l.cloneDeep)(e.sku);n.colorName=i.name,n.sizeName=r.name,t.push(n)}else t.push(s)}});else{var r=e.selectEqualSku(i.id);if(e.util.isEmptyObject(r)){var s=o.i(l.cloneDeep)(e.sku);s.colorName=i.name,t.push(s)}else t.push(r)}}),this.form.skus=t},selectEqualSku:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.isEdit){for(var i={},r=0;r<this.form.skus.length;r++)if(this.form.skus[r].colorId==e&&this.form.skus[r].sizeId==t&&this.form.skus[r].otherId==o){i=this.form.skus[r];break}return i}return{}},uploadSuccess:function(e){this.form.imgUrl=e},uploadMultipleSuccess:function(e){this.form.imgUrls=e},next:function(){this.activeName="detail"},save:function(){var e=this;void 0==this.form.content&&(this.form.content=this.content),this.$refs.form.validate(function(t){t&&s.e.saveGoods(e.form).then(function(t){e.$message.success("保存成功")}).catch(function(t){e.$message.error(t)})})},close:function(){this.$emit("close")}}}},916:function(e,t,o){"use strict";var i=o(1),r=o.n(i),l=o(9);t.a={props:{list:Array},computed:r()({},o.i(l.mapGetters)(["localLoading"])),methods:{edit:function(e){this.$emit("edit",e)},del:function(e){this.$emit("del",e)},selectChange:function(e){this.$emit("select-change",e)}}}},917:function(e,t,o){"use strict";var i=o(1136),r=o(1135),l=o(30);t.a={components:{PgTable:i.a,PgEdit:r.a},data:function(){return{isShowMoreQuery:!1,query:{condition:{stockStatus:0,sellType:-1,shopType:0,code:"",name:"",deptId:"",labelIds:[]},page:1,pageSize:15},total:0,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,operations:[{name:"发布商品",action:"add",type:"primary"},{name:"上架",loading:"put",isConfirm:!0,action:"put"},{name:"下架",loading:"pull",isConfirm:!0,action:"pull"},{name:"复制商品",action:"copy"}],goodsList:[]}},computed:{defaultQuery:{get:function(){return[{type:"input",label:"商品名称",model:"condition.name"},{type:"select",label:"商城类型",text:"text",value:"value",model:"condition.shopType",options:[{value:0,text:"通用"},{value:101,text:"紫云来商城"},{value:111,text:"懿城商品"},{value:121,text:"茶都商城"},{value:131,text:"拍卖"}]}]}},moreQuery:{get:function(){return[{type:"input",label:"商品编码",model:"condition.code"}]}}},mounted:function(){this.getPageList()},methods:{toggleOpen:function(e){this.isShowMoreQuery=e},search:function(){this.query.page=1,this.getPageList()},selectChange:function(e){this.selected=e},currentChange:function(e){this.query.page=e,this.getPageList()},sizeChange:function(e){this.query.pageSize=e,this.getPageList()},getPageList:function(){var e=this;l.e.getPageList(this.query).then(function(t){e.goodsList=t.data,e.total=t.totalCount})},edit:function(e){var t=this;l.e.getGoodsDetail(e.goodsId).then(function(e){t.showEdit=!0,t.isEdit=!0,t.editTitle="编辑",t.editForm=e}).catch(function(e){t.$message.error(e)})},add:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="新增",this.editForm={}},del:function(e){var t=this;l.e.delGoods({id:e.goodsId}).then(function(e){t.$message.success("删除成功"),t.getPageList()}).then(function(e){t.$message.error(e)})},put:function(){var e=this;if(0===this.selected.length)return void this.$message({message:"请先选择要上架的商品",type:"warning"});var t=[];this.selected.forEach(function(e){t.push(e.goodsId)}),l.e.putGoods({ids:t}).then(function(t){e.$message.success("上架成功"),e.getPageList()}).catch(function(t){e.$message.error(t)})},pull:function(){var e=this;if(0===this.selected.length)return void this.$message({message:"请先选择要下架的商品",type:"warning"});var t=[];this.selected.forEach(function(e){t.push(e.goodsId)}),l.e.pullGoods({ids:t}).then(function(t){e.$message.success("下架成功"),e.getPageList()}).catch(function(t){e.$message.error(t)})},copy:function(){},closeEdit:function(){this.showEdit=!1}}}}});
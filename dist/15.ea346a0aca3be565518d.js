webpackJsonp([15],{1025:function(e,t,s){t=e.exports=s(6)(),t.push([e.i,".item[data-v-14054aae]{width:100%}.input_item[data-v-14054aae]{width:200px}",""])},1041:function(e,t,s){t=e.exports=s(6)(),t.push([e.i,".item[data-v-34eb0c90]{width:100%}.input_item[data-v-34eb0c90]{width:200px}",""])},1190:function(e,t,s){"use strict";function i(e){s(1377)}var o=s(847),a=s(1246),n=s(2),r=i,l=n(o.a,a.a,r,"data-v-34eb0c90",null);t.a=l.exports},1191:function(e,t,s){"use strict";function i(e){s(1361)}var o=s(848),a=s(1220),n=s(2),r=i,l=n(o.a,a.a,r,"data-v-14054aae",null);t.a=l.exports},1192:function(e,t,s){"use strict";var i=s(849),o=s(1344),a=s(2),n=a(i.a,o.a,null,null,null);t.a=n.exports},1220:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[s("div",[s("div",{staticClass:"box_title"},[e._v("入住信息")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addPerson}},[e._v("增加")]),e._v(" "),s("br"),s("br"),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"入住人姓名",prop:"linkName","label-width":"100"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.linkName,callback:function(t){e.form.linkName=e._n(t)},expression:"form.linkName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"证件号码",prop:"certNo"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.certNo,callback:function(t){e.form.certNo=e._n(t)},expression:"form.certNo"}})],1)],1)],1),e._v(" "),e._l(e.form.personInfo,function(t,i){return s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"入住人姓名","label-width":"100"}},[s("el-input",{staticClass:"input_item",model:{value:t.linkName,callback:function(s){t.linkName=e._n(s)},expression:"item.linkName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"证件号码"}},[s("el-input",{staticClass:"input_item",model:{value:t.certNo,callback:function(s){t.certNo=e._n(s)},expression:"item.certNo"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item"},[s("el-button",{on:{click:function(t){e.remove(i)}}},[e._v("删除")])],1)],1)],1)}),e._v(" "),s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"房间名称/号",prop:"courseID","label-width":"100"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.courseID,callback:function(t){e.form.courseID=t},expression:"form.courseID"}},e._l(e.freeRoomList,function(e){return s("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"联系方式"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.linkTel,callback:function(t){e.form.linkTel=t},expression:"form.linkTel"}})],1)],1)],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{staticClass:"el-form-item_btns"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],2)],1)])},o=[],a={render:i,staticRenderFns:o};t.a=a},1246:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[s("div",[s("div",{staticClass:"box_title"},[e._v(e._s(e.title))]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"联系人",prop:"linkMan"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.linkMan,callback:function(t){e.form.linkMan=t},expression:"form.linkMan"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"联系电话",prop:"linkTel"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.linkTel,callback:function(t){e.form.linkTel=t},expression:"form.linkTel"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"预订酒店",prop:"shopID"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeHotel},model:{value:e.form.shopID,callback:function(t){e.form.shopID=t},expression:"form.shopID"}},e._l(e.hotelList,function(e){return s("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"预订房型",prop:"roomTypeID"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeRoomType},model:{value:e.form.roomTypeID,callback:function(t){e.form.roomTypeID=t},expression:"form.roomTypeID"}},e._l(e.roomList,function(e){return s("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),e._v(" "),s("span",[e._v(e._s(e.basePrice))])],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"入住时间",prop:"planOpenTime"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.planOpenTime,callback:function(t){e.form.planOpenTime=t},expression:"form.planOpenTime"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"离店时间",prop:"planEndTime"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.planEndTime,callback:function(t){e.form.planEndTime=t},expression:"form.planEndTime"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"数量",prop:"qty"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.qty,callback:function(t){e.form.qty=e._n(t)},expression:"form.qty"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"实际价格",prop:"price"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.price,callback:function(t){e.form.price=e._n(t)},expression:"form.price"}})],1)],1)],1),e._v(" "),s("el-form-item",{staticClass:"item",attrs:{label:"备注"}},[s("el-input",{staticClass:"input_item",attrs:{type:"textarea"},model:{value:e.form.note,callback:function(t){e.form.note=e._n(t)},expression:"form.note"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{staticClass:"el-form-item_btns"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1)])},o=[],a={render:i,staticRenderFns:o};t.a=a},1304:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"customer"},[s("pg-search-form",{attrs:{"default-form":e.defaultQuery,more:e.moreQuery,"is-show-more":e.isShowMoreQuery},on:{openMore:e.toggleOpen,search:e.search},slot:"search-form",model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),s("div",{staticClass:"pg_content"},[s("pg-operations",{attrs:{btns:e.operations},on:{add:e.add,able:e.able,unable:e.unable}}),e._v(" "),s("pg-table",{attrs:{id:"print_table",list:e.orderList},on:{"select-change":e.selectChange,edit:e.edit,saveIn:e.saveIn,cancel:e.cancel}}),e._v(" "),s("pg-pagination",{attrs:{"page-size":e.pageSize,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange},slot:"pagination"})],1),e._v(" "),s("pg-edit",{attrs:{hotelList:e.hotelList,title:e.editTitle,show:e.showEdit,isEdit:e.isEdit,editForm:e.editForm},on:{close:e.closeEdit,saveSuccess:e.saveClose}}),e._v(" "),s("room-in",{attrs:{freeRoomList:e.freeRoomList,show:e.showSave,isEdit:e.isEdit,hotelOrderId:e.checkId},on:{close:e.closeEdit,saveSuccess:e.closeSaveIn}})],1)},o=[],a={render:i,staticRenderFns:o};t.a=a},1344:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":"",border:"",stripe:""},on:{"selection-change":e.selectChange}},[s("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"sheet",label:"订单号",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"memberName",label:"下单账号",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"hotelName",label:"预订酒店",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"roomTypeName",label:"预订房型",width:"200"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"totalQty",label:"数量",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"状态",prop:"flagDesc",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"editor",label:"修改人",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"editTime",label:"修改时间",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("pg-button",{attrs:{icon:"shanchu"},on:{click:function(s){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),s("pg-button",{attrs:{icon:"shanchu"},on:{click:function(s){e.saveIn(t.row)}}},[e._v("入住")]),e._v(" "),s("pg-button",{attrs:{icon:"shanchu"},on:{click:function(s){e.cancel(t.row)}}},[e._v("取消")])]}}])})],1)},o=[],a={render:i,staticRenderFns:o};t.a=a},1361:function(e,t,s){var i=s(1025);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s(16)("bf182866",i,!0)},1377:function(e,t,s){var i=s(1041);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s(16)("c81aeec8",i,!0)},281:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(850),o=s(1304),a=s(2),n=a(i.a,o.a,null,null,null);t.default=n.exports},847:function(e,t,s){"use strict";var i=s(1),o=s.n(i),a=s(996);t.a=o()({},a.a)},848:function(e,t,s){"use strict";var i=s(1),o=s.n(i),a=s(997);t.a=o()({},a.a)},849:function(e,t,s){"use strict";var i=s(1),o=s.n(i),a=s(998);t.a=o()({},a.a)},850:function(e,t,s){"use strict";var i=s(1),o=s.n(i),a=s(999);t.a=o()({},a.a)},996:function(e,t,s){"use strict";var i=s(46),o=(s.n(i),s(30));t.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object,hotelList:Array},data:function(){return{form:{},initForm:{linkMan:"",linkTel:"",shopID:"",roomTypeID:"",qty:0,planOpenTime:"",planEndTime:"",price:0,note:""},roomList:[],basePrice:0,rules:{linkMan:[{required:!0,message:"请输入联系人名字"}],linkTel:[{required:!0,message:"请输入联系人电话"}],shopID:[{required:!0,message:"请选择酒店"}],roomTypeID:[{required:!0,message:"请选择房间类型"}],qty:[{required:!0,message:"请填写需要房间的数量"}],planOpenTime:[{required:!0,message:"请选择入住时间"}],planEndTime:[{required:!0,message:"请选择离店时间"}],price:[{required:!0,message:"请输入实付款"}]}}},watch:{editForm:function(e){this.setForm(this.editForm)}},created:function(){this.resetForm()},methods:{resetForm:function(){this.form=s.i(i.cloneDeep)(this.initForm),this.roomList=[],this.basePrice=0},setForm:function(e){var t=this;this.isEdit?this.$nextTick(function(){t.form=s.i(i.cloneDeep)(t.editForm)}):this.resetForm()},close:function(){this.$emit("close","1")},saveSuccess:function(){this.$emit("saveSuccess")},getRoomTypeDropList:function(e){var t=this;o.b.getRoomTypeDropList(e).then(function(e){t.roomList=e})},getRoomTypeDetail:function(e){var t=this;o.b.getRoomTypeDetail(e).then(function(e){t.basePrice=e.basePrice})},changeHotel:function(e){this.getRoomTypeDropList(e)},changeRoomType:function(e){this.getRoomTypeDetail(e)},save:function(){var e=this;this.$refs.form.validate(function(t){t&&o.b.saveHotelOrder(e.form).then(function(t){e.$message.success("保存成功"),e.resetForm(),e.saveSuccess()}).catch(function(t){e.$message.error(t)})})}}}},997:function(e,t,s){"use strict";var i=s(46),o=(s.n(i),s(30));t.a={props:{show:Boolean,isEdit:Boolean,hotelOrderId:String,freeRoomList:Array},data:function(){return{form:{},initForm:{hotelOrderID:"",hotemRoomID:"",linkName:"",certType:1,certNo:"",linkTel:"",personInfo:[]},rules:{linkName:[{required:!0,message:"请填写入住人"}],certNo:[{required:!0,message:"请填写入住人证件号码"}],hotemRoomID:[{required:!0,message:"请选择入住房间型号"}]}}},watch:{editForm:function(e){this.setForm(this.editForm)}},created:function(){this.resetForm()},methods:{resetForm:function(){this.form=s.i(i.cloneDeep)(this.initForm)},setForm:function(e){var t=this;this.isEdit?this.form=s.i(i.cloneDeep)(this.editForm):this.resetForm(),this.$nextTick(function(){t.$refs.contentEditor&&t.$refs.contentEditor.updateEditor()})},close:function(){this.$emit("close","2")},saveSuccess:function(){this.$emit("saveSuccess")},save:function(){var e=this;this.$refs.form.validate(function(t){t&&o.b.saveCheckInInfo(e.form).then(function(t){e.$message.success("保存成功"),e.resetForm(),e.saveSuccess()}).catch(function(t){e.$message.error(t)})})},addPerson:function(){var e={linkName:"",certType:1,certNo:""};this.form.personInfo.push(e)},remove:function(e){this.form.personInfo.splice(e,1)}}}},998:function(e,t,s){"use strict";s(30);t.a={props:{list:Array},methods:{edit:function(e){this.$emit("edit",e)},saveIn:function(e){this.$emit("saveIn",e)},cancel:function(e){this.$emit("cancel",e)},selectChange:function(e){this.$emit("select-change",e)}}}},999:function(e,t,s){"use strict";var i=s(1192),o=s(1190),a=s(1191),n=s(30);t.a={components:{PgTable:i.a,PgEdit:o.a,RoomIn:a.a},data:function(){return{isShowMoreQuery:!1,query:{sheet:"",memberName:"",shopID:"",flag:-1},page:1,pageSize:15,total:0,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,isShowGoods:!1,hotelList:[],operations:[{name:"新增",action:"add"},{name:"导出",action:"able"}],orderList:[],showSave:!1,checkId:"",freeRoomList:[]}},computed:{defaultQuery:{get:function(){return[{type:"select",label:"状态",model:"flag",text:"text",value:"value",options:[{value:-1,text:"全部"},{value:0,text:"待付款"},{value:10,text:"预订"},{value:20,text:"已付款"},{value:90,text:"已入住"},{value:97,text:"已取消"},{value:100,text:"已完成"}]},{type:"select",label:"酒店",model:"shopID",text:"text",value:"value",options:this.hotelList}]}},moreQuery:{get:function(){return[{type:"input",label:"订单号",model:"sheet"},{type:"input",label:"下单账号",model:"memberName"}]}}},mounted:function(){this.getHotelOrderList(),this.getHotelDropList()},methods:{toggleOpen:function(e){this.isShowMoreQuery=e},search:function(){this.getHotelOrderList()},selectChange:function(e){var t=this;t.selected=[],e.forEach(function(e,s){t.selected.push(e.scenicTicketTypeID)})},currentChange:function(e){this.page=e},sizeChange:function(e){this.pageSize=e},add:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="新增"},edit:function(e){var t=this,s=e.hotelOrderID;n.b.getHotelOrderDetail(s).then(function(e){t.editForm=e,t.showEdit=!0,t.isEdit=!0,t.editTitle="编辑"})},able:function(){var e=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});n.b.enabledTicketType(this.selected).then(function(t){e.search()})},unable:function(){var e=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});n.b.disabledTicketType(this.selected).then(function(t){e.search()})},closeEdit:function(e){"1"==e?this.showEdit=!1:this.showSave=!1},saveClose:function(){this.closeEdit(1),this.search()},closeSaveIn:function(){this.closeEdit(2),this.search()},getHotelOrderList:function(){var e=this;n.b.getHotelOrderList(this.query,this.page,this.pageSize).then(function(t){e.total=t.totalCount,e.page=t.page,e.orderList=t.data})},getHotelDropList:function(){var e=this;n.b.getHotelDropList().then(function(t){e.hotelList=t,e.hotelList.splice(0,0,{text:"不限",value:""})})},saveIn:function(e){var t=this,s=e.hotelOrderID,i=e.hotelRoomTypeID;this.checkId=s,n.b.getFreeRoomDropDownList(i).then(function(e){t.freeRoomList=e,t.showSave=!0})},cancel:function(e){var t=this,s=e.hotelOrderID;n.b.cancelHotelOrder(s).then(function(e){t.$message.success("取消订单成功"),t.search()}).catch(function(e){t.$message.error(e)})}},watch:{page:function(e){this.page=e,this.search()},pageSize:function(e){this.page=1,this.pageSize=e,this.search()}}}}});
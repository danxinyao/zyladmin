webpackJsonp([19],{1e3:function(e,t,i){"use strict";var s=i(46),a=(i.n(s),i(30));t.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object},data:function(){return{form:{},initForm:{id:"",name:"",linkTele:"",state:"",city:"",district:"",address:"",longitud:"",latitude:"",bookTime:"",keepTime:"",overTime:"",refundTime:"",note:"",mainImg:"",imgUrls:[]},rules:{name:[{required:!0,message:"请输入景点名称"}],linkTele:[{required:!0,message:"请输入联系电话"}],address:[{required:!0,message:"请输入详细地址"}],keepTime:[{required:!0,message:"请选择保留时间"}],overTime:[{required:!0,message:"请选择退房时间"}],refundTime:[{required:!0,message:"请选择退款时间"}]}}},watch:{editForm:function(e){this.setForm(this.editForm)}},created:function(){this.resetForm()},methods:{resetForm:function(){this.form=i.i(s.cloneDeep)(this.initForm)},setForm:function(e){this.isEdit?this.form=i.i(s.cloneDeep)(this.editForm):this.resetForm()},close:function(){this.resetForm(),this.$emit("close")},saveSuccess:function(){this.$emit("saveSuccess")},save:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(e.form.imgUrls.length>30)return void e.$message({message:"景点副图最多允许上传30张",type:"warning"});a.c.saveHotel(e.form).then(function(t){e.$message.success("保存成功"),e.resetForm(),e.saveSuccess()}).catch(function(t){e.$message.error(t)})}})},uploadMultipleSuccess:function(e){this.form.imgUrls=e},uploadSuccess:function(e){this.form.mainImg=e}}}},1001:function(e,t,i){"use strict";i(30);t.a={props:{list:Array},methods:{edit:function(e){this.$emit("edit",e)},selectChange:function(e){this.$emit("select-change",e)}}}},1002:function(e,t,i){"use strict";var s=i(1194),a=i(1193),n=i(30);t.a={components:{PgTable:s.a,PgEdit:a.a},data:function(){return{isShowMoreQuery:!1,query:{name:"",address:"",editor:"",status:-1,linkTel:"",time:"",editTime:{begin:"",end:""}},page:1,pageSize:15,total:0,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,isShowGoods:!1,operations:[{name:"新增",action:"add",type:"primary"},{name:"启用",action:"able"},{name:"禁用",action:"unable"}],hotelList:[]}},computed:{defaultQuery:{get:function(){return[{type:"select",label:"状态",model:"status",text:"text",value:"value",options:[{value:-1,text:"全部"},{value:1,text:"在用"},{value:0,text:"禁用"}]},{type:"input",label:"名称",model:"name"}]}},moreQuery:{get:function(){return[{type:"input",label:"地址",model:"address"},{type:"input",label:"修改人",model:"editor"},{type:"timeRange",label:"录入时间段",model:"time",start:"editTime.begin",end:"editTime.end"},{type:"input",label:"电话",model:"linkTel"}]}}},mounted:function(){this.search()},methods:{toggleOpen:function(e){this.isShowMoreQuery=e},search:function(){this.getHotelList()},selectChange:function(e){var t=this;t.selected=[],e.forEach(function(e,i){t.selected.push(e.id)})},currentChange:function(e){this.page=e},sizeChange:function(e){this.pageSize=e},add:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="新增"},edit:function(e){var t=this,i=e.id;n.c.getHotelDetail(i).then(function(e){e.keepTime=e.keepTime.substr(11,5),e.overTime=e.overTime.substr(11,5),e.refundTime=e.refundTime.substr(11,5),t.editForm=e,t.showEdit=!0,t.isEdit=!0,t.editTitle="编辑"})},able:function(){var e=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});this.$confirm("您确定要启用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.c.enabledHotel({ids:e.selected}).then(function(t){e.search()})})},unable:function(){var e=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});this.$confirm("您确定要禁用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.c.disabledHotel({ids:e.selected}).then(function(t){e.search()})})},closeEdit:function(){this.showEdit=!1},saveClose:function(){this.showEdit=!1,this.search()},getHotelList:function(){var e=this;n.c.getHotePagelList(this.query,this.page,this.pageSize).then(function(t){e.total=t.totalCount,e.page=t.page,e.hotelList=t.data})}},watch:{page:function(e){this.page=e,this.search()},pageSize:function(e){this.page=1,this.pageSize=e,this.search()}}}},1045:function(e,t,i){t=e.exports=i(6)(),t.push([e.i,".item[data-v-41dcf292]{width:100%}.input_item[data-v-41dcf292]{width:200px}",""])},1070:function(e,t,i){t=e.exports=i(6)(),t.push([e.i,".mainImg[data-v-742374d2]{width:60px;height:60px;vertical-align:middle;margin-right:10px}",""])},1193:function(e,t,i){"use strict";function s(e){i(1381)}var a=i(851),n=i(1252),r=i(2),o=s,l=r(a.a,n.a,o,"data-v-41dcf292",null);t.a=l.exports},1194:function(e,t,i){"use strict";function s(e){i(1406)}var a=i(852),n=i(1298),r=i(2),o=s,l=r(a.a,n.a,o,"data-v-742374d2",null);t.a=l.exports},1252:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[i("div",[i("div",{staticClass:"box_title"},[e._v(e._s(e.title))]),e._v(" "),i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{staticClass:"item",attrs:{label:"景点名称",prop:"name"}},[i("el-input",{staticClass:"input_item",attrs:{placeholder:"景点名称"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticClass:"item",attrs:{label:"联系电话",prop:"linkTele"}},[i("el-input",{staticClass:"input_item",attrs:{placeholder:"联系电话"},model:{value:e.form.linkTele,callback:function(t){e.form.linkTele=e._n(t)},expression:"form.linkTele"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"景点地址",prop:"address"}},[i("pg-region",{attrs:{state:e.form.state,city:e.form.city,district:e.form.district},on:{"update:state":function(t){e.form.state=t},"update:city":function(t){e.form.city=t},"update:district":function(t){e.form.district=t}}}),e._v(" "),i("br"),e._v(" "),i("el-input",{staticClass:"input_item",attrs:{type:"textarea",placeholder:"详细地址"},model:{value:e.form.address,callback:function(t){e.form.address=t},expression:"form.address"}})],1),e._v(" "),i("br"),e._v(" "),i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{staticClass:"item",attrs:{label:"景点坐标"}},[i("el-input",{staticClass:"input_item",attrs:{placeholder:"经度"},model:{value:e.form.longitud,callback:function(t){e.form.longitud=e._n(t)},expression:"form.longitud"}},[i("template",{slot:"append"},[e._v("经度")])],2),e._v("\n                       \n                    "),i("el-input",{staticClass:"input_item",attrs:{placeholder:"纬度"},model:{value:e.form.latitude,callback:function(t){e.form.latitude=e._n(t)},expression:"form.latitude"}},[i("template",{slot:"append"},[e._v("纬度")])],2)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{staticClass:"item",attrs:{label:"提前预订时间"}},[i("el-input",{staticClass:"input_item",attrs:{placeholder:"提前多少小时"},model:{value:e.form.bookTime,callback:function(t){e.form.bookTime=t},expression:"form.bookTime"}},[i("template",{slot:"append"},[e._v("h")])],2)],1)],1)],1),e._v(" "),i("br"),e._v(" "),i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{staticClass:"item",attrs:{label:"保留时间",prop:"keepTime"}},[i("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:05",end:"18:00"},placeholder:"选择时间"},model:{value:e.form.keepTime,callback:function(t){e.form.keepTime=t},expression:"form.keepTime"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticClass:"item",attrs:{label:"退房时间",prop:"overTime"}},[i("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:05",end:"18:00"},placeholder:"选择时间"},model:{value:e.form.overTime,callback:function(t){e.form.overTime=t},expression:"form.overTime"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticClass:"item",attrs:{label:"退款时间",prop:"refundTime"}},[i("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:05",end:"18:00"},placeholder:"选择时间"},model:{value:e.form.refundTime,callback:function(t){e.form.refundTime=t},expression:"form.refundTime"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"酒店主图"}},[i("pg-img-upload",{attrs:{image:e.form.mainImg},on:{success:e.uploadSuccess}})],1),e._v(" "),i("br"),e._v(" "),i("el-form-item",{attrs:{label:"酒店副图"}},[i("pg-img-upload",{attrs:{multiple:"",imageList:e.form.imgUrls},on:{success:e.uploadMultipleSuccess}})],1),e._v(" "),i("br"),e._v(" "),i("el-form-item",{attrs:{label:"景点描述"}},[i("el-input",{staticClass:"input_item",attrs:{type:"textarea",placeholder:"请输入景点描述"},model:{value:e.form.note,callback:function(t){e.form.note=t},expression:"form.note"}})],1),e._v(" "),i("br"),e._v(" "),i("el-form-item",{staticClass:"el-form-item_btns"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1)])},a=[],n={render:s,staticRenderFns:a};t.a=n},1298:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":"",border:"",stripe:""},on:{"selection-change":e.selectChange}},[i("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",prop:"",label:"酒店名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.mainImg?i("pg-img",{staticClass:"mainImg",attrs:{src:t.row.mainImg}}):e._e(),e._v("\n            "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"address",label:"地址",width:"250"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"linkTel",label:"电话",width:"250"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"status",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?i("span",{staticStyle:{color:"green"}},[e._v("在用")]):e._e(),e._v(" "),0==t.row.status?i("span",{staticStyle:{color:"red"}},[e._v(" 停用")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"editor",label:"修改人",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"editTime",label:"修改时间",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("pg-button",{attrs:{icon:"shanchu"},on:{click:function(i){e.edit(t.row)}}},[e._v("编辑")])]}}])})],1)},a=[],n={render:s,staticRenderFns:a};t.a=n},1327:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"customer"},[i("pg-search-form",{attrs:{"default-form":e.defaultQuery,more:e.moreQuery,"is-show-more":e.isShowMoreQuery},on:{openMore:e.toggleOpen,search:e.search},slot:"search-form",model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),i("div",{staticClass:"pg_content"},[i("pg-operations",{attrs:{btns:e.operations},on:{add:e.add,able:e.able,unable:e.unable}}),e._v(" "),i("pg-table",{attrs:{id:"print_table",list:e.hotelList},on:{"select-change":e.selectChange,edit:e.edit}}),e._v(" "),i("pg-pagination",{attrs:{"page-size":e.pageSize,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange},slot:"pagination"})],1),e._v(" "),i("pg-edit",{attrs:{title:e.editTitle,show:e.showEdit,isEdit:e.isEdit,editForm:e.editForm},on:{close:e.closeEdit,saveSuccess:e.saveClose}})],1)},a=[],n={render:s,staticRenderFns:a};t.a=n},1381:function(e,t,i){var s=i(1045);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i(16)("37133335",s,!0)},1406:function(e,t,i){var s=i(1070);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i(16)("5390179d",s,!0)},282:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(853),a=i(1327),n=i(2),r=n(s.a,a.a,null,null,null);t.default=r.exports},851:function(e,t,i){"use strict";var s=i(1),a=i.n(s),n=i(1e3);t.a=a()({},n.a)},852:function(e,t,i){"use strict";var s=i(1),a=i.n(s),n=i(1001);t.a=a()({},n.a)},853:function(e,t,i){"use strict";var s=i(1),a=i.n(s),n=i(1002);t.a=a()({},n.a)}});
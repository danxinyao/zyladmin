webpackJsonp([25],{1010:function(t,e,s){"use strict";var i=s(46),a=(s.n(i),s(30));e.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object},data:function(){return{form:{},initForm:{shopID:"",name:"",imgUrl:"",imgUrls:[],basShopDetail:{linkTele:"",state:"",city:"",district:"",address:"",note:""},basShopExt:{longitud:0,latitude:0,bookTime:0,beginTime:"",endTime:""}},rules:{name:[{required:!0,message:"请输入景点名称"}],"basShopDetail.linkTele":[{required:!0,message:"请输入联系电话"}],"basShopDetail.address":[{required:!0,message:"请输入详细地址"}],"basShopExt.beginTime":[{required:!0,message:"请选择开门时间"}],"basShopExt.endTime":[{required:!0,message:"请选择打烊时间"}]}}},watch:{editForm:function(t){this.setForm(this.editForm)}},created:function(){this.resetForm()},methods:{resetForm:function(){this.form=s.i(i.cloneDeep)(this.initForm)},setForm:function(t){var e=this;this.isEdit?this.form=s.i(i.cloneDeep)(this.editForm):this.resetForm(),this.$nextTick(function(){e.$refs.contentEditor&&e.$refs.contentEditor.updateEditor()})},close:function(){this.$emit("close")},saveSuccess:function(){this.$emit("saveSuccess")},save:function(){var t=this;this.$refs.form.validate(function(e){if(e){if(t.form.imgUrls.length>30)return void t.$message({message:"景点副图最多允许上传30张",type:"warning"});a.b.saveScenic(t.form).then(function(e){t.$message.success("保存成功"),t.resetForm(),t.saveSuccess()}).catch(function(e){t.$message.error(e)})}})},uploadMultipleSuccess:function(t){this.form.imgUrls=t},uploadSuccess:function(t){this.form.imgUrl=t}}}},1011:function(t,e,s){"use strict";s(30);e.a={props:{list:Array},methods:{edit:function(t){this.$emit("edit",t)},selectChange:function(t){this.$emit("select-change",t)}}}},1012:function(t,e,s){"use strict";var i=s(1201),a=s(1200),o=s(30);e.a={components:{PgTable:i.a,PgEdit:a.a},data:function(){return{isShowMoreQuery:!1,query:{name:"",address:"",editor:"",status:-1},page:1,pageSize:15,total:0,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,isShowGoods:!1,operations:[{name:"新增",action:"add"},{name:"启用",action:"able"},{name:"禁用",action:"unable"}],scenicList:[]}},computed:{defaultQuery:{get:function(){return[{type:"select",label:"状态",model:"status",text:"text",value:"value",options:[{value:-1,text:"不限"},{value:1,text:"启用"},{value:0,text:"禁用"}]},{type:"input",label:"名称",model:"name"}]}},moreQuery:{get:function(){return[{type:"input",label:"地址",model:"address"},{type:"input",label:"修改人",model:"editor"}]}}},mounted:function(){this.getScenicList()},methods:{toggleOpen:function(t){this.isShowMoreQuery=t},search:function(){this.getScenicList()},selectChange:function(t){var e=this;e.selected=[],t.forEach(function(t,s){e.selected.push(t.shopID)})},currentChange:function(t){this.page=t},sizeChange:function(t){this.pageSize=t},add:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="新增"},edit:function(t){var e=this,s=t.shopID;o.b.getScenicDetail(s).then(function(t){e.editForm=t,e.showEdit=!0,e.isEdit=!0,e.editTitle="编辑"})},able:function(){var t=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});o.b.enabledScenic(this.selected).then(function(e){t.search()})},unable:function(){var t=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});o.b.disabledScenic(this.selected).then(function(e){t.search()})},closeEdit:function(){this.showEdit=!1},saveClose:function(){this.showEdit=!1,this.search()},getScenicList:function(){var t=this;o.b.getScenicList(this.query,this.page,this.pageSize).then(function(e){t.total=e.totalCount,t.page=e.page,t.scenicList=e.data})}},watch:{page:function(t){this.page=t,this.search()},pageSize:function(t){this.page=1,this.pageSize=t,this.search()}}}},1075:function(t,e,s){e=t.exports=s(6)(),e.push([t.i,".item[data-v-7a42138c]{width:100%}.input_item[data-v-7a42138c]{width:200px}",""])},1200:function(t,e,s){"use strict";function i(t){s(1411)}var a=s(861),o=s(1307),n=s(2),l=i,r=n(a.a,o.a,l,"data-v-7a42138c",null);e.a=r.exports},1201:function(t,e,s){"use strict";var i=s(862),a=s(1274),o=s(2),n=o(i.a,a.a,null,null,null);e.a=n.exports},1274:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"highlight-current-row":"",border:"",stripe:""},on:{"selection-change":t.selectChange}},[s("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"name",label:"景点名称",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"address",label:"地址",width:"250"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"beginTime",label:"营业时间",width:"250"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"status",label:"状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?s("span",{staticStyle:{color:"green"}},[t._v(" 启用")]):t._e(),t._v(" "),0==e.row.status?s("span",{staticStyle:{color:"red"}},[t._v(" 禁用")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"editor",label:"修改人",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"editTime",label:"修改时间",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("pg-button",{attrs:{icon:"shanchu"},on:{click:function(s){t.edit(e.row)}}},[t._v("编辑")])]}}])})],1)},a=[],o={render:i,staticRenderFns:a};e.a=o},1307:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pg-box",{attrs:{isShowBox:t.show},on:{close:t.close}},[s("div",[s("div",{staticClass:"box_title"},[t._v(t._s(t.title))]),t._v(" "),s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"景点名称",prop:"name"}},[s("el-input",{staticClass:"input_item",model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"联系电话",prop:"basShopDetail.linkTele"}},[s("el-input",{staticClass:"input_item",model:{value:t.form.basShopDetail.linkTele,callback:function(e){t.form.basShopDetail.linkTele=t._n(e)},expression:"form.basShopDetail.linkTele"}})],1)],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"景点地址",prop:"basShopDetail.address"}},[s("pg-region",{attrs:{state:t.form.basShopDetail.state,city:t.form.basShopDetail.city,district:t.form.basShopDetail.district},on:{"update:state":function(e){t.form.basShopDetail.state=e},"update:city":function(e){t.form.basShopDetail.city=e},"update:district":function(e){t.form.basShopDetail.district=e}}}),t._v(" "),s("br"),t._v(" "),s("el-input",{staticClass:"input_item",attrs:{type:"textarea"},model:{value:t.form.basShopDetail.address,callback:function(e){t.form.basShopDetail.address=e},expression:"form.basShopDetail.address"}})],1),t._v(" "),s("br"),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{staticClass:"item",attrs:{label:"景点坐标"}},[s("el-input",{staticClass:"input_item",attrs:{placeholder:"经度"},model:{value:t.form.basShopExt.longitud,callback:function(e){t.form.basShopExt.longitud=t._n(e)},expression:"form.basShopExt.longitud"}}),t._v("   \n                    "),s("el-input",{staticClass:"input_item",attrs:{placeholder:"纬度"},model:{value:t.form.basShopExt.latitude,callback:function(e){t.form.basShopExt.latitude=t._n(e)},expression:"form.basShopExt.latitude"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"提前预订时间"}},[s("el-input",{staticClass:"input_item",model:{value:t.form.basShopExt.bookTime,callback:function(e){t.form.basShopExt.bookTime=e},expression:"form.basShopExt.bookTime"}})],1)],1)],1),t._v(" "),s("br"),t._v(" "),s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"开门时间",prop:"basShopExt.beginTime"}},[s("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:05",end:"18:00"},placeholder:"选择时间"},model:{value:t.form.basShopExt.beginTime,callback:function(e){t.form.basShopExt.beginTime=e},expression:"form.basShopExt.beginTime"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"打烊时间",prop:"basShopExt.endTime"}},[s("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:05",end:"18:00"},placeholder:"选择时间"},model:{value:t.form.basShopExt.endTime,callback:function(e){t.form.basShopExt.endTime=e},expression:"form.basShopExt.endTime"}})],1)],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"景点主图"}},[s("pg-img-upload",{attrs:{image:t.form.imgUrl},on:{success:t.uploadSuccess}})],1),t._v(" "),s("br"),t._v(" "),s("el-form-item",{attrs:{label:"景点副图"}},[s("pg-img-upload",{attrs:{multiple:"",imageList:t.form.imgUrls},on:{success:t.uploadMultipleSuccess}})],1),t._v(" "),s("br"),t._v(" "),s("el-form-item",{attrs:{label:"景点描述"}},[s("el-input",{staticClass:"input_item",attrs:{type:"textarea"},model:{value:t.form.basShopDetail.note,callback:function(e){t.form.basShopDetail.note=e},expression:"form.basShopDetail.note"}})],1),t._v(" "),s("br"),t._v(" "),s("el-form-item",{staticClass:"el-form-item_btns"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("返回")])],1)],1)],1)])},a=[],o={render:i,staticRenderFns:a};e.a=o},1348:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"customer"},[s("pg-search-form",{attrs:{"default-form":t.defaultQuery,more:t.moreQuery,"is-show-more":t.isShowMoreQuery},on:{openMore:t.toggleOpen,search:t.search},slot:"search-form",model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),s("div",{staticClass:"pg_content"},[s("pg-operations",{attrs:{btns:t.operations},on:{add:t.add,able:t.able,unable:t.unable}}),t._v(" "),s("pg-table",{attrs:{id:"print_table",list:t.scenicList},on:{"select-change":t.selectChange,edit:t.edit}}),t._v(" "),s("pg-pagination",{attrs:{"page-size":t.pageSize,total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange},slot:"pagination"})],1),t._v(" "),s("pg-edit",{attrs:{title:t.editTitle,show:t.showEdit,isEdit:t.isEdit,editForm:t.editForm},on:{close:t.closeEdit,saveSuccess:t.saveClose}})],1)},a=[],o={render:i,staticRenderFns:a};e.a=o},1411:function(t,e,s){var i=s(1075);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(16)("18a89ea9",i,!0)},285:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(863),a=s(1348),o=s(2),n=o(i.a,a.a,null,null,null);e.default=n.exports},861:function(t,e,s){"use strict";var i=s(1),a=s.n(i),o=s(1010);e.a=a()({},o.a)},862:function(t,e,s){"use strict";var i=s(1),a=s.n(i),o=s(1011);e.a=a()({},o.a)},863:function(t,e,s){"use strict";var i=s(1),a=s.n(i),o=s(1012);e.a=a()({},o.a)}});
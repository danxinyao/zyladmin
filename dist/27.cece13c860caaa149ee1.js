webpackJsonp([27],{1083:function(e,t,s){t=e.exports=s(6)(),t.push([e.i,".item[data-v-9ff8fca8]{width:100%}.input_item[data-v-9ff8fca8]{width:200px}",""])},1187:function(e,t,s){"use strict";function a(e){s(1419)}var r=s(842),o=s(1323),i=s(2),n=a,l=i(r.a,o.a,n,"data-v-9ff8fca8",null);t.a=l.exports},1188:function(e,t,s){"use strict";var a=s(843),r=s(1219),o=s(2),i=o(a.a,r.a,null,null,null);t.a=i.exports},1219:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":"",border:"",stripe:""},on:{"selection-change":e.selectChange}},[s("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"sheet",label:"订单号",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"createTime",label:"下单时间",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"memberName",label:"下单账号",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"shopName",label:"对应课室",width:"200"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"courseName",label:"课程名称",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"courseTime",label:"课程时间",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"totalQty",label:"数量",width:"80"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.flag?s("span",[e._v(" 待付款")]):e._e(),e._v(" "),10==t.row.flag?s("span",[e._v(" 预订")]):e._e(),e._v(" "),20==t.row.flag?s("span",[e._v(" 已出码")]):e._e(),e._v(" "),90==t.row.flag?s("span",[e._v(" 已兑票")]):e._e(),e._v(" "),100==t.row.flag?s("span",[e._v(" 已使用")]):e._e(),e._v(" "),97==t.row.flag?s("span",[e._v(" 已取消")]):e._e(),e._v(" "),99==t.row.flag?s("span",[e._v(" 已过期")]):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"eCode",label:"对应取票码",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"editor",label:"修改人",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"editTime",label:"修改时间",width:"250"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[20==t.row.flag?s("pg-button",{attrs:{icon:"shanchu"},on:{click:function(s){e.changeCultureCode(t.row)}}},[e._v("兑换")]):e._e(),e._v(" "),s("pg-button",{attrs:{icon:"shanchu"},on:{click:function(s){e.cancelCultureOrder(t.row)}}},[e._v("取消")])]}}])})],1)},r=[],o={render:a,staticRenderFns:r};t.a=o},1323:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[s("div",[s("div",{staticClass:"box_title"},[e._v(e._s(e.title))]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"预订课室",prop:"shopID"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.shopID,callback:function(t){e.form.shopID=t},expression:"form.shopID"}},e._l(e.roomList,function(e){return s("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"预订课程",prop:"courseID"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.courseID,callback:function(t){e.form.courseID=t},expression:"form.courseID"}},e._l(e.classList,function(e){return s("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:40}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"数量",prop:"totalQty"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.totalQty,callback:function(t){e.form.totalQty=e._n(t)},expression:"form.totalQty"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"item",attrs:{label:"预订时间",prop:"beginTime"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","default-value":e.defaultDate},model:{value:e.form.beginTime,callback:function(t){e.form.beginTime=t},expression:"form.beginTime"}})],1)],1)],1),e._v(" "),s("el-form-item",{staticClass:"item",attrs:{label:"实付款",prop:"totalAmount"}},[s("el-input",{staticClass:"input_item",model:{value:e.form.totalAmount,callback:function(t){e.form.totalAmount=e._n(t)},expression:"form.totalAmount"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{staticClass:"el-form-item_btns"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1)])},r=[],o={render:a,staticRenderFns:r};t.a=o},1350:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"customer"},[s("pg-search-form",{attrs:{"default-form":e.defaultQuery,more:e.moreQuery,"is-show-more":e.isShowMoreQuery},on:{openMore:e.toggleOpen,search:e.search},slot:"search-form",model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),s("div",{staticClass:"pg_content"},[s("pg-operations",{attrs:{btns:e.operations},on:{add:e.add,able:e.able}}),e._v(" "),s("pg-table",{attrs:{id:"print_table",list:e.classOrderList},on:{"select-change":e.selectChange,changeCultureCode:e.changeCultureCode,cancelCultureOrder:e.cancelCultureOrder}}),e._v(" "),s("pg-pagination",{attrs:{"page-size":e.pageSize,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange},slot:"pagination"})],1),e._v(" "),s("pg-edit",{attrs:{roomList:e.roomList,classList:e.classList,title:e.editTitle,show:e.showEdit,isEdit:e.isEdit,editForm:e.editForm},on:{close:e.closeEdit,saveSuccess:e.saveClose}})],1)},r=[],o={render:a,staticRenderFns:r};t.a=o},1419:function(e,t,s){var a=s(1083);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(16)("d997e732",a,!0)},279:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(844),r=s(1350),o=s(2),i=o(a.a,r.a,null,null,null);t.default=i.exports},842:function(e,t,s){"use strict";var a=s(1),r=s.n(a),o=s(991);t.a=r()({},o.a)},843:function(e,t,s){"use strict";var a=s(1),r=s.n(a),o=s(992);t.a=r()({},o.a)},844:function(e,t,s){"use strict";var a=s(1),r=s.n(a),o=s(993);t.a=r()({},o.a)},991:function(e,t,s){"use strict";var a=s(46),r=(s.n(a),s(30));t.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object,roomList:Array,classList:Array},data:function(){return{form:{},initForm:{courseID:"",totalQty:0,shopID:"",totalAmount:0,beginTime:"",payMode:0},rules:{courseID:[{required:!0,message:"请选择课程"}],shopID:[{required:!0,message:"请选择课室"}],beginTime:[{required:!0,message:"请选择开始时间"}],totalAmount:[{required:!0,message:"请输入付款金额"}],totalQty:[{required:!0,message:"请输入课程数量"}]}}},watch:{editForm:function(e){this.setForm(this.editForm)}},created:function(){this.initForm.beginTime=new Date,this.resetForm()},methods:{resetForm:function(){this.form=s.i(a.cloneDeep)(this.initForm)},setForm:function(e){var t=this;this.isEdit?this.form=s.i(a.cloneDeep)(this.editForm):this.resetForm(),this.$nextTick(function(){t.$refs.contentEditor&&t.$refs.contentEditor.updateEditor()})},close:function(){this.$emit("close")},saveSuccess:function(){this.$emit("saveSuccess")},save:function(){var e=this;this.$refs.form.validate(function(t){t&&r.b.saveCultureOrder(e.form).then(function(t){e.$message.success("保存成功"),e.resetForm(),e.saveSuccess()}).catch(function(t){e.$message.error(t)})})}}}},992:function(e,t,s){"use strict";s(30);t.a={props:{list:Array},methods:{changeCultureCode:function(e){this.$emit("changeCultureCode",e)},cancelCultureOrder:function(e){this.$emit("cancelCultureOrder",e)},selectChange:function(e){this.$emit("select-change",e)}}}},993:function(e,t,s){"use strict";var a=s(1188),r=s(1187),o=s(30);t.a={components:{PgTable:a.a,PgEdit:r.a},data:function(){return{isShowMoreQuery:!1,query:{shopId:"",sheet:"",flag:-1,courseId:"",eCode:"",name:""},page:1,pageSize:15,total:0,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,isShowGoods:!1,roomList:[],operations:[{name:"新增",action:"add"},{name:"导出",action:"able"}],classOrderList:[],classList:[]}},computed:{defaultQuery:{get:function(){return[{type:"select",label:"状态",model:"flag",text:"text",value:"value",options:[{value:-1,text:"全部"},{value:0,text:"待付款"},{value:10,text:"预订"},{value:20,text:"已出码"},{value:90,text:"已兑票"},{value:97,text:"已取消"},{value:99,text:"已过期"},{value:100,text:"已使用"}]},{type:"select",label:"课室",model:"shopId",text:"text",value:"value",options:this.roomList}]}},moreQuery:{get:function(){return[{type:"input",label:"订单号",model:"sheet"},{type:"input",label:"下单账号",model:"name"},{type:"input",label:"取票码",model:"eCode"}]}}},mounted:function(){this.getCultureOrderList(),this.getCultureRoomDropDownList(),this.getCultureClassDropDownList()},methods:{toggleOpen:function(e){this.isShowMoreQuery=e},search:function(){this.getCultureOrderList()},selectChange:function(e){var t=this;t.selected=[],e.forEach(function(e,s){t.selected.push(e.scenicTicketTypeID)})},currentChange:function(e){this.page=e},sizeChange:function(e){this.pageSize=e},add:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="新增"},edit:function(e){var t=this,s=e.scenicTicketTypeID;o.b.getTicketTypeDetail(s).then(function(e){t.editForm=e,t.showEdit=!0,t.isEdit=!0,t.editTitle="编辑"})},able:function(){var e=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});o.b.enabledTicketType(this.selected).then(function(t){e.search()})},closeEdit:function(){this.showEdit=!1},saveClose:function(){this.showEdit=!1,this.search()},getCultureOrderList:function(){var e=this;o.b.getCultureOrderList(this.query,this.page,this.pageSize).then(function(t){e.total=t.totalCount,e.page=t.page,e.classOrderList=t.data})},getCultureRoomDropDownList:function(){var e=this;o.b.getCultureRoomDropDownList().then(function(t){e.roomList=t})},getCultureClassDropDownList:function(){var e=this;o.b.getCultureClassDropDownList().then(function(t){e.classList=t})},changeCultureCode:function(e){var t=this,s=e.courseOrderID;o.b.changeCultureCode(s).then(function(e){t.$message.success("兑换成功"),t.search()}).catch(function(e){t.$message.error(e)})},cancelCultureOrder:function(e){var t=this,s=e.courseOrderID;o.b.cancelCultureOrder(s).then(function(e){t.$message.success("取消成功"),t.search()}).catch(function(e){t.$message.error(e)})}},watch:{page:function(e){this.page=e,this.search()},pageSize:function(e){this.page=1,this.pageSize=e,this.search()}}}}});
webpackJsonp([39],{1027:function(t,e,n){e=t.exports=n(6)(),e.push([t.i,".btnList[data-v-1b76270e]{display:block;width:122px;float:right;margin-right:45px}",""])},1134:function(t,e,n){"use strict";var i=n(764),s=n(1302),r=n(2),o=r(i.a,s.a,null,null,null);e.a=o.exports},1225:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"informationClassfiy"},[n("el-tree",{attrs:{data:t.deptData,props:t.defaultProps,"expand-on-click-node":!1,"render-content":t.renderContent}}),t._v(" "),n("pg-edit",{attrs:{title:t.title,show:t.showEdit,editForm:t.editForm},on:{close:t.closeEdit,refresh:t.refresh}})],1)},s=[],r={render:i,staticRenderFns:s};e.a=r},1302:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pg-box",{attrs:{isShowBox:t.show},on:{close:t.close}},[n("div",[n("div",{staticClass:"box_title"},[t._v(t._s(t.title))]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",inline:!0,rules:t.rules}},[n("el-form-item",{attrs:{label:"分类名",prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),n("br"),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:"saveGoodsClassfiy"===t.localLoading},on:{click:t.save}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:t.close}},[t._v("关闭")])],1)],1)],1)])},s=[],r={render:i,staticRenderFns:s};e.a=r},1363:function(t,e,n){var i=n(1027);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(16)("439d8e84",i,!0)},255:function(t,e,n){"use strict";function i(t){n(1363)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(765),r=n(1225),o=n(2),a=i,l=o(s.a,r.a,a,"data-v-1b76270e",null);e.default=l.exports},764:function(t,e,n){"use strict";var i=n(1),s=n.n(i),r=n(913);e.a=s()({},r.a)},765:function(t,e,n){"use strict";var i=n(1),s=n.n(i),r=n(914);e.a=s()({},r.a)},913:function(t,e,n){"use strict";var i=n(1),s=n.n(i),r=n(30),o=n(46),a=(n.n(o),n(9));e.a={props:{title:String,show:Boolean,editForm:Object},data:function(){return{form:{},initForm:{id:"",name:"",parentID:""},rules:{name:[{required:!0,message:"请输入商品分类名"},{max:20,message:"长度在20个字符以内"}]}}},watch:{editForm:function(){this.util.isEmptyObject(this.editForm)?this.form=this.initForm:this.form=this.editForm}},computed:s()({},n.i(a.mapGetters)(["localLoading"])),methods:{save:function(){var t=this;this.$refs.form.validate(function(e){e&&r.e.saveGoodsClassfiy(t.form).then(function(){t.$message({message:"保存成功",type:"success"}),t.refresh(),t.close()})})},close:function(){this.$emit("close"),this.initForm={id:"",name:"",parentID:""}},refresh:function(){this.$emit("refresh")}}}},914:function(t,e,n){"use strict";var i=n(30),s=n(1134);e.a={components:{PgEdit:s.a},data:function(){return{deptData:[],defaultProps:{children:"children",label:"label"},title:"编辑",showEdit:!1,isEdit:!1,editForm:{},isFirst:!1,propertyForm:{},showProperty:!1}},mounted:function(){this.getGoodsTree()},methods:{getGoodsTree:function(){var t=this;i.e.getGoodsTree().then(function(e){var n=[];e.forEach(function(t){var e=[];t.subItems.length&&t.subItems.forEach(function(t){var n=[];t.subItems.length&&t.subItems.forEach(function(t){var e=[];t.subItems.length&&t.subItems.forEach(function(t){e.push({value:t.deptID,label:t.name,level:4,children:[],parentID:t.parentID})}),n.push({value:t.deptID,label:t.name,level:3,children:e,parentID:t.parentID})}),e.push({value:t.deptID,label:t.name,level:2,children:n,parentID:t.parentID})}),n.push({value:t.deptID,label:t.name,level:1,children:e,parentID:t.parentID})}),t.deptData=n})},refresh:function(){this.getGoodsTree()},addSubDept:function(t,e){this.editForm={id:"",name:"",parentId:e.value},this.title="新增子分类",this.showEdit=!0},updateDept:function(t,e){this.editForm={id:e.value,name:e.label,parentID:e.parentID},this.title="修改",this.showEdit=!0},delDept:function(t,e){var n=this,s=e;this.$confirm("确定删除 "+s.label+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(s.children.length>0)return n.$message({type:"error",message:"请先删除该分类下的商品"}),!1;i.e.deleteGoodsType(s.value).then(function(){n.$message({type:"success",message:"删除成功!"}),n.getGoodsTree()}).catch(function(t){n.$message({type:"error",message:t})})})},closeEdit:function(){this.showEdit=!1},move:function(t,e,n){var s=this;i.e.moveGoodsClassfiy({id:e.value,flag:n}).then(function(t){s.getGoodsTree()})},renderContent:function(t,e){var n=this,i=e.node,s=e.data,r=e.store;return 4!==s.level?t("span",null,[t("span",null,[t("span",null,[i.label])]),t("span",{style:"margin-left:10%"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.move(r,s,0)}}},["上移"]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.move(r,s,1)}}},["下移"])]),t("span",{class:"btnList",style:"display:block; width:122px; float: right; margin-right:45px;"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.updateDept(r,s)}}},["编辑"]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.delDept(r,s)}}},["删除"]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.addSubDept(r,s)}}},["增加子类"])])]):t("span",null,[t("span",null,[t("span",null,[i.label])]),t("span",{style:"margin-left:10%"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.move(r,s,0)}}},["上移"]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.move(r,s,1)}}},["下移"])]),t("span",{class:"btnList",style:"display:block; width:122px; float: right; margin-right:45px;"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.updateDept(r,s)}}},["编辑"]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return n.delDept(r,s)}}},["删除"])])])}}}}});
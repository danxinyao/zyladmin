webpackJsonp([13],{1003:function(e,t,o){"use strict";var i=o(30);t.a={props:{showDialog:Boolean,size:String,hotelRoomTypeID:Object},data:function(){return{form:{hotelRoomTypeID:"",name:""},rules:{name:[{required:!0,message:"请输入房间名称/号"}]}}},watch:{"hotelRoomTypeID.roomTypeID":function(){this.form.hotelRoomTypeID=this.hotelRoomTypeID.roomTypeID}},mounted:function(){},methods:{close:function(){this.$emit("closeDialog")},save:function(){var e=this;this.$refs.form.validate(function(t){t&&i.c.saveRoom(e.form).then(function(t){e.$message.success("添加成功"),e.refresh(),e.close()}).catch(function(t){e.$message.error(t)})})},refresh:function(){this.$emit("refresh")}}}},1004:function(e,t,o){"use strict";var i=o(46),s=(o.n(i),o(30));t.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object},data:function(){return{form:{},initForm:{hotelRoomTypeID:"",shopID:"",name:"",basePrice:"",area:"",dinnerType:"",bed:"",description:"",mainImg:"",imgUrls:[]},dropdownList:[],options:[{value:0,text:"不含餐"},{value:1,text:"含早"},{value:2,text:"全包"}],rules:{shopID:[{required:!0,message:"请选择所属酒店"}],name:[{required:!0,message:"请输入房型名称"}],basePrice:[{required:!0,message:"请输入房型价格"}],area:[{required:!0,message:"请输入房型面积"}],bed:[{required:!0,message:"请输入床铺大小"}],dinnerType:[{required:!0,message:"请选择餐饮类型"}]}}},watch:{editForm:function(e){this.setForm(this.editForm)}},mounted:function(){this.resetForm(),this.getDropdownList()},methods:{getDropdownList:function(){var e=this;s.c.getDropdownHotelList().then(function(t){e.dropdownList=t,e.dropdownList.forEach(function(e){e.value=e.value.toLowerCase()})})},resetForm:function(){this.form=o.i(i.cloneDeep)(this.initForm)},setForm:function(e){this.isEdit?this.form=o.i(i.cloneDeep)(this.editForm):this.resetForm()},close:function(){this.$emit("close"),this.resetForm()},saveSuccess:function(){this.$emit("saveSuccess")},save:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(e.form.imgUrls.length>30)return void e.$message({message:"景点副图最多允许上传30张",type:"warning"});s.c.saveRoomType(e.form).then(function(t){e.$message.success("保存成功"),e.resetForm(),e.saveSuccess()}).catch(function(t){e.$message.error(t)})}})},uploadMultipleSuccess:function(e){this.form.imgUrls=e},uploadSuccess:function(e){this.form.mainImg=e}}}},1005:function(e,t,o){"use strict";o(30);t.a={props:{list:Array,roomList:Array},methods:{edit:function(e){this.$emit("edit",e)},editRoomType:function(e){this.$emit("editRoomType",e)},selectChange:function(e){this.$emit("select-change",e)},expand:function(e){this.$emit("expand",e)},enabledRoom:function(e){this.$emit("enabledRoom",e)},disabledRoom:function(e){this.$emit("disabledRoom",e)}}}},1006:function(e,t,o){"use strict";var i=o(32),s=o.n(i),a=o(1197),n=o(1196),r=o(1195),l=o(30);t.a={components:{PgTable:a.a,PgEdit:n.a,PgOrderdialog:r.a},data:function(){return{isShowMoreQuery:!1,query:{shopID:"",name:"",editor:"",time:"",editTimeBegin:"",editTimeEnd:"",dinnerType:0,status:-2},page:1,pageSize:15,total:0,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,isShowGoods:!1,operations:[{name:"新增",action:"add",type:"primary"},{name:"启用",action:"able"},{name:"禁用",action:"unable"}],hotelList:[],dropdownList:[],showDialog:!1,dialogSize:"small",hotelRoomTypeID:{},roomList:[]}},computed:{defaultQuery:{get:function(){return[{type:"select",label:"状态",model:"status",text:"text",value:"value",options:[{value:-2,text:"全部"},{value:1,text:"未满"},{value:0,text:"已满"},{value:-1,text:"禁用"}]},{type:"select",label:"酒店名称",model:"shopID",text:"text",value:"value",options:this.dropdownList}]}},moreQuery:{get:function(){return[{type:"input",label:"房型名称",model:"name"},{type:"input",label:"修改人",model:"editor"},{type:"select",label:"餐饮",model:"dinnerType",text:"text",value:"value",options:[{value:0,text:"不含餐"},{value:1,text:"含早"},{value:2,text:"全包"}]},{type:"timeRange",label:"录入时间段",model:"time",start:"editTimeBegin",end:"editTimeEnd"}]}}},mounted:function(){this.getDropdownList(),this.search()},methods:{expand:function(e){var t=this,o="";e.roomTypeID?o=e.roomTypeID:e.hotelRoomTypeID&&(o=e.hotelRoomTypeID),l.c.getRoomList(o).then(function(e){t.roomList=e,t.hotelList.forEach(function(t){if(t.roomTypeID==o){var i;t.roomList.length=0,(i=t.roomList).push.apply(i,s()(e))}})})},enabledRoom:function(e){var t=this;l.c.enabledRoom({id:e.hotelRoomID}).then(function(e){t.$message.success("启用成功！"),t.search()})},disabledRoom:function(e){var t=this;l.c.disabledRoom({id:e.hotelRoomID}).then(function(e){t.$message.success("禁用成功！"),t.search()})},refresh:function(){this.search()},closeDialog:function(){this.showDialog=!1},getDropdownList:function(){var e=this;l.c.getDropdownHotelList().then(function(t){e.dropdownList=t})},editRoomType:function(e){this.hotelRoomTypeID=e,this.showDialog=!0},toggleOpen:function(e){this.isShowMoreQuery=e},search:function(){this.getHotelList()},selectChange:function(e){var t=this;t.selected=[],e.forEach(function(e,o){t.selected.push(e.roomTypeID)})},currentChange:function(e){this.page=e},sizeChange:function(e){this.pageSize=e},add:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="新增"},edit:function(e){var t=this,o=e.roomTypeID;l.c.getRoomDetail(o).then(function(e){t.editForm=e,t.showEdit=!0,t.isEdit=!0,t.editTitle="编辑"})},able:function(){var e=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});this.$confirm("您确定要启用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.c.enabledRoomType({ids:e.selected}).then(function(t){e.search()})})},unable:function(){var e=this;if(this.selected.length<1)return void this.$message({message:"请至少勾选一条",type:"warning"});this.$confirm("您确定要禁用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.c.disabledRoomType({ids:e.selected}).then(function(t){e.search()})})},closeEdit:function(){this.showEdit=!1},saveClose:function(){this.showEdit=!1,this.search()},getHotelList:function(){var e=this;l.c.getRoomPagelList(this.query,this.page,this.pageSize).then(function(t){e.total=t.totalCount,e.page=t.page,e.hotelList=t.data,e.hotelList.forEach(function(e){e.roomList=[]})})}},watch:{page:function(e){this.page=e,this.search()},pageSize:function(e){this.page=1,this.pageSize=e,this.search()}}}},1049:function(e,t,o){t=e.exports=o(6)(),t.push([e.i,".item[data-v-474cdecb]{width:100%}.input_item[data-v-474cdecb]{width:200px}",""])},1064:function(e,t,o){t=e.exports=o(6)(),t.push([e.i,".mainImg[data-v-651df003]{width:60px;height:60px;vertical-align:middle;margin-right:10px}",""])},1067:function(e,t,o){t=e.exports=o(6)(),t.push([e.i,".btns[data-v-70e90709]{margin:20px auto}",""])},1195:function(e,t,o){"use strict";function i(e){o(1403)}var s=o(854),a=o(1292),n=o(2),r=i,l=n(s.a,a.a,r,"data-v-70e90709",null);t.a=l.exports},1196:function(e,t,o){"use strict";function i(e){o(1385)}var s=o(855),a=o(1258),n=o(2),r=i,l=n(s.a,a.a,r,"data-v-474cdecb",null);t.a=l.exports},1197:function(e,t,o){"use strict";function i(e){o(1400)}var s=o(856),a=o(1287),n=o(2),r=i,l=n(s.a,a.a,r,"data-v-651df003",null);t.a=l.exports},1258:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[o("div",[o("div",{staticClass:"box_title"},[e._v(e._s(e.title))]),e._v(" "),o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[o("el-row",{attrs:{gutter:40}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{staticClass:"item",attrs:{label:"所属酒店",prop:"shopID"}},[o("el-select",{attrs:{placeholder:"请选择",label:"所属酒店"},model:{value:e.form.shopID,callback:function(t){e.form.shopID=t},expression:"form.shopID"}},e._l(e.dropdownList,function(e){return o("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{staticClass:"item",attrs:{label:"房型名称",prop:"name"}},[o("el-input",{staticClass:"input_item",attrs:{placeholder:"房型名称"},model:{value:e.form.name,callback:function(t){e.form.name=e._n(t)},expression:"form.name"}})],1)],1)],1),e._v(" "),o("br"),e._v(" "),o("el-row",{attrs:{gutter:40}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{staticClass:"item",attrs:{label:"房型价格",prop:"basePrice"}},[o("el-input",{staticClass:"input_item",attrs:{placeholder:"数字，单位元"},model:{value:e.form.basePrice,callback:function(t){e.form.basePrice=t},expression:"form.basePrice"}},[o("template",{slot:"append"},[e._v("元")])],2)],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{staticClass:"item",attrs:{label:"房型面积",prop:"area"}},[o("el-input",{staticClass:"input_item",attrs:{max:"45",min:"25",placeholder:"面积区间，25-45"},model:{value:e.form.area,callback:function(t){e.form.area=e._n(t)},expression:"form.area"}},[o("template",{slot:"append"},[e._v("m"),o("sup",[e._v("2")])])],2)],1)],1)],1),e._v(" "),o("br"),e._v(" "),o("el-row",{attrs:{gutter:40}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{staticClass:"item",attrs:{label:"餐饮",prop:"dinnerType"}},[o("el-select",{attrs:{placeholder:"请选择",label:"所属酒店"},model:{value:e.form.dinnerType,callback:function(t){e.form.dinnerType=t},expression:"form.dinnerType"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{staticClass:"item",attrs:{label:"床铺大小",prop:"bed"}},[o("el-input",{staticClass:"input_item",attrs:{placeholder:"如2*1.8"},model:{value:e.form.bed,callback:function(t){e.form.bed=t},expression:"form.bed"}},[o("template",{slot:"append"},[e._v("m")])],2)],1)],1)],1),e._v(" "),o("br"),e._v(" "),o("el-form-item",{attrs:{label:"房型主图"}},[o("pg-img-upload",{attrs:{image:e.form.mainImg},on:{success:e.uploadSuccess}})],1),e._v(" "),o("br"),e._v(" "),o("el-form-item",{attrs:{label:"房型副图"}},[o("pg-img-upload",{attrs:{multiple:"",imageList:e.form.imgUrls},on:{success:e.uploadMultipleSuccess}})],1),e._v(" "),o("br"),e._v(" "),o("el-form-item",{attrs:{label:"房型描述"}},[o("el-input",{staticClass:"input_item",attrs:{type:"textarea",placeholder:"请输入房型描述"},model:{value:e.form.description,callback:function(t){e.form.description=t},expression:"form.description"}})],1),e._v(" "),o("br"),e._v(" "),o("el-form-item",{staticClass:"el-form-item_btns"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1)])},s=[],a={render:i,staticRenderFns:s};t.a=a},1287:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":"",border:"",stripe:""},on:{"selection-change":e.selectChange,expand:e.expand}},[o("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{type:"expand",label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-table",{staticClass:"skuTable",staticStyle:{width:"50%"},attrs:{data:t.row.roomList,"highlight-current-row":"",border:""}},[o("el-table-column",{attrs:{align:"center",prop:"name",label:"房间名称/号","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"name",label:"状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?o("span",{staticStyle:{color:"green"}},[e._v("启用")]):e._e(),e._v(" "),0==t.row.status?o("span",{staticStyle:{color:"red"}},[e._v(" 停用")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"editor",label:"修改人","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"editTime",label:"修改时间","min-width":"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pg-button",{attrs:{icon:"shanchu"},on:{click:function(o){e.disabledRoom(t.row)}}},[e._v("停用")]),e._v(" "),o("pg-button",{attrs:{icon:"shanchu"},on:{click:function(o){e.enabledRoom(t.row)}}},[e._v("启用")])]}}])})],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"name",label:"房型名称",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"dinnerTypeDesc",label:"餐饮",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"basePrice",label:"价格",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"hotelName",label:"所属酒店",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"remains",label:"状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.remains>0?o("span",{staticStyle:{color:"green"}},[e._v("未满("+e._s(t.row.remains)+")")]):e._e(),e._v(" "),0==t.row.remains?o("span",{staticStyle:{color:"red"}},[e._v("已满(0)")]):e._e(),e._v(" "),-1==t.row.remains?o("span",{staticStyle:{color:"red"}},[e._v("停用")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"editor",label:"修改人",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"editTime",label:"修改时间",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pg-button",{attrs:{icon:"shanchu"},on:{click:function(o){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),o("pg-button",{attrs:{icon:"shanchu"},on:{click:function(o){e.editRoomType(t.row)}}},[e._v("录入房型")])]}}])})],1)},s=[],a={render:i,staticRenderFns:s};t.a=a},1292:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("pg-dialog",{attrs:{isShow:e.showDialog,size:e.size},on:{close:e.close}},[o("div",{staticClass:"dialog_content"},[o("div",{staticClass:"note"},[o("div",{staticClass:"box_title"},[e._v("录入房间")]),e._v(" "),o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[o("el-form-item",{staticClass:"item",attrs:{label:"房间名称/号",prop:"name"}},[o("el-input",{attrs:{placeholder:"房间名称/号"},model:{value:e.form.name,callback:function(t){e.form.name=e._n(t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{staticClass:"el-form-item_btns"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1)])])},s=[],a={render:i,staticRenderFns:s};t.a=a},1297:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"customer"},[o("pg-search-form",{attrs:{"default-form":e.defaultQuery,more:e.moreQuery,"is-show-more":e.isShowMoreQuery},on:{openMore:e.toggleOpen,search:e.search},slot:"search-form",model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),o("div",{staticClass:"pg_content"},[o("pg-operations",{attrs:{btns:e.operations},on:{add:e.add,able:e.able,unable:e.unable}}),e._v(" "),o("pg-table",{attrs:{id:"print_table",list:e.hotelList,roomList:e.roomList},on:{"select-change":e.selectChange,edit:e.edit,expand:e.expand,disabledRoom:e.disabledRoom,enabledRoom:e.enabledRoom,editRoomType:e.editRoomType}}),e._v(" "),o("pg-pagination",{attrs:{"page-size":e.pageSize,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange},slot:"pagination"})],1),e._v(" "),o("pg-edit",{attrs:{dropdownList:e.dropdownList,title:e.editTitle,show:e.showEdit,isEdit:e.isEdit,editForm:e.editForm},on:{close:e.closeEdit,saveSuccess:e.saveClose}}),e._v(" "),o("pg-orderdialog",{attrs:{size:e.dialogSize,showDialog:e.showDialog,hotelRoomTypeID:e.hotelRoomTypeID},on:{closeDialog:e.closeDialog,refresh:e.refresh}})],1)},s=[],a={render:i,staticRenderFns:s};t.a=a},1385:function(e,t,o){var i=o(1049);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(16)("31c03d66",i,!0)},1400:function(e,t,o){var i=o(1064);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(16)("61d97f9a",i,!0)},1403:function(e,t,o){var i=o(1067);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(16)("1d0c009e",i,!0)},283:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(857),s=o(1297),a=o(2),n=a(i.a,s.a,null,null,null);t.default=n.exports},854:function(e,t,o){"use strict";var i=o(1),s=o.n(i),a=o(1003);t.a=s()({},a.a)},855:function(e,t,o){"use strict";var i=o(1),s=o.n(i),a=o(1004);t.a=s()({},a.a)},856:function(e,t,o){"use strict";var i=o(1),s=o.n(i),a=o(1005);t.a=s()({},a.a)},857:function(e,t,o){"use strict";var i=o(1),s=o.n(i),a=o(1006);t.a=s()({},a.a)}});
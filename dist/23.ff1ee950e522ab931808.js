webpackJsonp([23],{1022:function(e,t,o){t=e.exports=o(6)(),t.push([e.i,".spec_list[data-v-0b493ad9]{margin-top:10px}",""])},1105:function(e,t,o){"use strict";function i(e){o(1358)}var a=o(719),n=o(1213),s=o(2),r=i,l=s(a.a,n.a,r,"data-v-0b493ad9",null);t.a=l.exports},1106:function(e,t,o){"use strict";var i=o(720),a=o(1227),n=o(2),s=n(i.a,a.a,null,null,null);t.a=s.exports},1213:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[o("div",{staticClass:"box_title"},[e._v(e._s(e.title))]),e._v(" "),o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基本信息",name:"info"}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[o("pg-title",{attrs:{title:"基本信息"}}),e._v(" "),o("el-form-item",{attrs:{label:"商品类目"}},[o("el-cascader",{attrs:{options:e.treeList},on:{change:e.changeTreeList},model:{value:e.deptId,callback:function(t){e.deptId=t},expression:"deptId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{model:{value:e.form.title,callback:function(t){e.form.title=t},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"所属专题"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.auctionID,callback:function(t){e.form.auctionID=t},expression:"form.auctionID"}},e._l(e.auctionList,function(e){return o("el-option",{key:e.auctionID,attrs:{label:e.name,value:e.auctionID}})}))],1),e._v(" "),o("pg-title",{attrs:{title:"拍卖信息"}}),e._v(" "),o("el-form-item",{attrs:{label:"起拍价"}},[o("el-input",{attrs:{placeholder:"0.00"},model:{value:e.form.beginPrice,callback:function(t){e.form.beginPrice=t},expression:"form.beginPrice"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"最低加价"}},[o("el-input",{attrs:{placeholder:"0.00"},model:{value:e.form.minStepPrice,callback:function(t){e.form.minStepPrice=t},expression:"form.minStepPrice"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"最高加价"}},[o("el-input",{attrs:{placeholder:"0.00"},model:{value:e.form.maxStepPrice,callback:function(t){e.form.maxStepPrice=t},expression:"form.maxStepPrice"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"保证金"}},[o("el-input",{attrs:{placeholder:"0.00"},model:{value:e.form.guarantee,callback:function(t){e.form.guarantee=t},expression:"form.guarantee"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"开拍时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.beginTime,callback:function(t){e.form.beginTime=t},expression:"form.beginTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"结束时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.endTime,callback:function(t){e.form.endTime=t},expression:"form.endTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"送拍机构"}},[o("el-input",{model:{value:e.form.provider,callback:function(t){e.form.provider=t},expression:"form.provider"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品主图"}},[o("pg-img-upload",{attrs:{image:e.form.imgUrl},on:{success:e.uploadSuccess}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品副图"}},[o("pg-img-upload",{attrs:{multiple:"",imageList:e.form.subImgUrls},on:{success:e.uploadMultipleSuccess}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品简介"}},[o("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.form.note,callback:function(t){e.form.note=t},expression:"form.note"}})],1),e._v(" "),o("pg-title",{attrs:{title:"物流及其他"}}),e._v(" "),o("el-form-item",{attrs:{label:"固定运费"}},[o("el-input",{attrs:{placeholder:"0.00"},model:{value:e.form.postFee,callback:function(t){e.form.postFee=t},expression:"form.postFee"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"运费模板"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.freightTemplateID,callback:function(t){e.form.freightTemplateID=t},expression:"form.freightTemplateID"}},e._l(e.freightTemplateList,function(e){return o("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"长度"}},[o("el-input",{model:{value:e.form.long,callback:function(t){e.form.long=t},expression:"form.long"}},[o("template",{slot:"append"},[e._v("cm")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"宽度"}},[o("el-input",{model:{value:e.form.width,callback:function(t){e.form.width=t},expression:"form.width"}},[o("template",{slot:"append"},[e._v("cm")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"高度"}},[o("el-input",{model:{value:e.form.heigh,callback:function(t){e.form.heigh=t},expression:"form.heigh"}},[o("template",{slot:"append"},[e._v("cm")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"物流重量"}},[o("el-input",{model:{value:e.form.weigh,callback:function(t){e.form.weigh=t},expression:"form.weigh"}},[o("template",{slot:"append"},[e._v("kg")])],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"上架时间"}},[o("el-radio-group",{model:{value:e.form.goodsStatus,callback:function(t){e.form.goodsStatus=t},expression:"form.goodsStatus"}},[o("el-radio",{attrs:{label:1}},[e._v("立即上架")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("暂不上架")])],1)],1),e._v(" "),o("el-form-item",{staticClass:"el-form-item_btns"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.next}},[e._v("下一步")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"商品详情",name:"detail"}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules,inline:""}},[o("el-form-item",[o("pg-editor",{ref:"contentEditor",attrs:{"init-content":e.content},model:{value:e.form.content,callback:function(t){e.form.content=t},expression:"form.content"}})],1),e._v(" "),o("el-form-item",{staticClass:"el-form-item_btns"},[o("el-button",{attrs:{size:"small",type:"primary",loading:"saveGoods"===e.localLoading},on:{click:e.save}},[e._v("\n                        保存\n                    ")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("\n                        返回\n                    ")])],1)],1)],1)],1)],1)},a=[],n={render:i,staticRenderFns:a};t.a=n},1227:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:"getGoodsPageList"===e.localLoading,expression:"localLoading === 'getGoodsPageList'"}],staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"拼命加载中","highlight-current-row":"",border:"",stripe:""},on:{"selection-change":e.selectChange}},[o("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"name",label:"拍品名称","min-width":"200"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"auctionName",label:"所属专场","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"status",label:"开拍状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.status(t.row.status))+"\n        ")]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"goodsStatus",label:"拍品状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.goodsStatus?o("el-tag",{attrs:{type:"success"}},[e._v("已上架")]):o("el-tag",{attrs:{type:"gray"}},[e._v("未上架")])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间",width:"250"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pg-button",{attrs:{title:"编辑"},on:{click:function(o){e.edit(t.row)}}})]}}])})],1)},a=[],n={render:i,staticRenderFns:a};t.a=n},1235:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("pg-content",[o("pg-search-form",{attrs:{"reset-form":e.query,"default-form":e.defaultQuery,more:e.moreQuery,"is-show-more":e.isShowMoreQuery},on:{openMore:e.toggleOpen,search:e.search},slot:"search-form",model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),o("pg-operations",{attrs:{btns:e.operations},on:{add:e.add,enable:e.enable,disable:e.disable},slot:"operations"}),e._v(" "),o("pg-table",{attrs:{list:e.goodsList},on:{"select-change":e.selectChange,edit:e.edit},slot:"list-table"}),e._v(" "),o("pg-pagination",{attrs:{"page-size":e.query.pageSize,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange},slot:"pagination"}),e._v(" "),o("pg-edit",{attrs:{title:e.editTitle,show:e.showEdit,isEdit:e.isEdit,editForm:e.editForm},on:{refresh:e.getGoodsPageList,close:e.closeEdit}})],1)},a=[],n={render:i,staticRenderFns:a};t.a=n},1358:function(e,t,o){var i=o(1022);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(16)("496dd16e",i,!0)},239:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(721),a=o(1235),n=o(2),s=n(i.a,a.a,null,null,null);t.default=s.exports},716:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var i=[{value:0,text:"未开始"},{value:10,text:"已开始"},{value:90,text:"延时中"},{value:95,text:"流拍"},{value:97,text:"取消"},{value:100,text:"结束"}]},719:function(e,t,o){"use strict";var i=o(1),a=o.n(i),n=o(868);t.a=a()({},n.a)},720:function(e,t,o){"use strict";var i=o(1),a=o.n(i),n=o(869);t.a=a()({},n.a)},721:function(e,t,o){"use strict";var i=o(1),a=o.n(i),n=o(870);t.a=a()({},n.a)},868:function(e,t,o){"use strict";var i=o(1),a=o.n(i),n=o(46),s=(o.n(n),o(30)),r=o(9);t.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object},data:function(){return{form:{},initForm:{deptID:"",auctionItemID:"",auctionID:"",title:"",barcodeID:"",description:"",content:"",provider:"",beginPrice:"",guarantee:"",minStepPrice:"",maxStepPrice:"",topPrice:"",price:"",offerCount:"",memberID:"",beginTime:"",endTime:"",status:"",goodsStatus:1,imgUrl:"",subImgUrls:[],postFee:"",freightTemplateID:"",long:"",width:"",heigh:"",weigh:""},deptId:[],treeList:[],auctionList:[],freightTemplateList:[],content:"",activeName:"info"}},computed:a()({},o.i(r.mapGetters)(["localLoading"])),watch:{editForm:function(e){this.setForm(this.editForm)},treeList:function(){this.isEdit&&this.setGoodsTree()}},mounted:function(){this.isEdit||this.resetForm(),this.getGoodsTree(),this.getAuctionPageList(),this.getFreightTemplateList()},created:function(){this.setForm(this.editForm)},methods:{resetForm:function(){this.form=o.i(n.cloneDeep)(this.initForm),this.content=""},setForm:function(e){var t=this;this.isEdit?(this.form=o.i(n.cloneDeep)(this.editForm),this.content=this.form.content,this.treeList.length>0&&this.setGoodsTree()):this.resetForm(),this.$nextTick(function(){t.$refs.contentEditor&&t.$refs.contentEditor.updateEditor()})},getGoodsTree:function(){var e=this;s.e.getGoodsTree().then(function(t){t.forEach(function(t){var o={value:t.deptID,label:t.name,children:[]};t.subItems.forEach(function(e){var t={value:e.deptID,label:e.name,children:[]};e.subItems.forEach(function(e){var o={value:e.deptID,label:e.name,children:[]};e.subItems.forEach(function(e){var t={value:e.deptID,label:e.name};o.children.push(t)}),t.children.push(o)}),o.children.push(t)}),e.treeList.push(o)})})},setGoodsTree:function(){var e=this;this.treeList.forEach(function(t){t.children.forEach(function(o){o.children.forEach(function(i){i.children.forEach(function(a){e.form.deptID==a.value&&(e.deptId.push(t.value),e.deptId.push(o.value),e.deptId.push(i.value),e.deptId.push(a.value))})})})})},changeTreeList:function(e){this.form.deptID=e[e.length-1]},getAuctionPageList:function(){var e=this;s.d.getAuctionPageList({condition:{name:"",creater:""},page:1,pageSize:1e3}).then(function(t){e.auctionList=t.data}).catch(function(t){e.$message.error(t)})},getFreightTemplateList:function(){var e=this;s.a.getFreightTemplateList().then(function(t){e.freightTemplateList=t})},uploadSuccess:function(e){this.form.imgUrl=e},uploadMultipleSuccess:function(e){this.form.subImgUrls=e},next:function(){this.activeName="detail"},save:function(){var e=this;void 0==this.form.content&&(this.form.content=this.content),this.$refs.form.validate(function(t){t&&s.d.saveGoods(e.form).then(function(t){e.$message.success("保存成功"),e.$emit("refresh")}).catch(function(t){e.$message.error(t)})})},close:function(){this.$emit("close")}}}},869:function(e,t,o){"use strict";var i=o(1),a=o.n(i),n=o(716),s=o(9);t.a={props:{list:Array},computed:a()({},o.i(s.mapGetters)(["localLoading"])),methods:{edit:function(e){this.$emit("edit",e)},selectChange:function(e){this.$emit("select-change",e)},status:function(e){for(var t="",o=0;o<n.a.length;o++)if(n.a[o].value===e){t=n.a[o].text;break}return t}}}},870:function(e,t,o){"use strict";var i=o(1106),a=o(1105),n=o(30);o(716);t.a={components:{PgTable:i.a,PgEdit:a.a},data:function(){return{isShowMoreQuery:!1,query:{condition:{status:-1,name:"",customNo:"",deptID:"",GoodsStatus:-1},page:1,pageSize:15},total:1,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,operations:[{name:"发布拍品",action:"add",type:"primary"},{name:"启用",action:"enable"},{name:"禁用",action:"disable"}],goodsList:[]}},computed:{defaultQuery:{get:function(){return[{type:"input",label:"拍品名称",model:"condition.name"},{type:"select",label:"状态",model:"condition.GoodsStatus",text:"text",value:"value",options:[{value:-1,text:"全部"},{value:1,text:"启用"},{value:0,text:"禁用"}]}]}},moreQuery:{get:function(){return[]}}},mounted:function(){this.search()},methods:{toggleOpen:function(e){this.isShowMoreQuery=e},search:function(){this.page=1,this.getGoodsPageList()},getGoodsPageList:function(){var e=this;n.d.getGoodsPageList(this.query).then(function(t){e.goodsList=t.data,e.total=t.total})},selectChange:function(e){this.selected=e},currentChange:function(e){this.query.page=e,this.getGoodsPageList()},sizeChange:function(e){this.query.pageSize=e,this.getGoodsPageList()},edit:function(e){var t=this;n.d.getGoodsDetail(e.auctionItemID).then(function(e){t.showEdit=!0,t.isEdit=!0,t.editTitle="编辑",t.editForm=e}).catch(function(e){t.$message.error(e)})},add:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="新增",this.editForm={}},enable:function(){var e=this;if(0===this.selected.length)return void this.$message({message:"请先选择要启用的拍品",type:"warning"});var t=[];this.selected.forEach(function(e){t.push(e.auctionItemID)}),n.d.enableGoods(t).then(function(t){e.$message.success("启用成功"),e.getGoodsPageList()}).catch(function(t){e.$message.error(t)})},disable:function(){var e=this;if(0===this.selected.length)return void this.$message({message:"请先选择要禁用的拍品",type:"warning"});var t=[];this.selected.forEach(function(e){t.push(e.auctionItemID)}),n.d.disableGoods(t).then(function(t){e.$message.success("禁用成功"),e.getGoodsPageList()}).catch(function(t){e.$message.error(t)})},closeEdit:function(){this.showEdit=!1}}}}});
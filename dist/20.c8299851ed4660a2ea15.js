webpackJsonp([20],{1042:function(t,e,s){e=t.exports=s(6)(),e.push([t.i,".input_item[data-v-37a8eaa2]{width:50%}",""])},1062:function(t,e,s){e=t.exports=s(6)(),e.push([t.i,".disable[data-v-6414c09f]{color:red}",""])},1175:function(t,e,s){"use strict";function i(t){s(1378)}var n=s(825),o=s(1247),a=s(2),r=i,l=a(n.a,o.a,r,"data-v-37a8eaa2",null);e.a=l.exports},1176:function(t,e,s){"use strict";function i(t){s(1398)}var n=s(826),o=s(1283),a=s(2),r=i,l=a(n.a,o.a,r,"data-v-6414c09f",null);e.a=l.exports},1231:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"customer"},[s("div",{staticClass:"pg_content"},[s("pg-operations",{attrs:{btns:t.operations},on:{add:t.add}}),t._v(" "),s("pg-table",{attrs:{list:t.accountList},on:{"select-change":t.selectChange,edit:t.edit,disable:t.disable,enable:t.enable,del:t.del,resetPass:t.resetPass}}),t._v(" "),s("pg-pagination",{attrs:{"page-size":t.pageSize,total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange},slot:"pagination"})],1),t._v(" "),s("pg-edit",{attrs:{title:t.editTitle,show:t.showEdit,type:t.type,editForm:t.editForm},on:{close:t.closeEdit,refresh:t.refresh}})],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},1247:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pg-box",{attrs:{isShowBox:t.show},on:{close:t.close}},[s("div",{staticClass:"box_title"},[t._v(t._s(t.title))]),t._v(" "),2!==t.type?s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[s("el-form-item",{attrs:{label:"账号",prop:"login"}},[s("el-input",{staticClass:"input_item",model:{value:t.form.login,callback:function(e){t.form.login=e},expression:"form.login"}}),t._v(" "),s("span",[t._v("用户密码默认为手机号后6位")])],1),t._v(" "),s("el-form-item",{attrs:{label:"名字",prop:"name"}},[s("el-input",{staticClass:"input_item",model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"联系方式",prop:"tele"}},[s("el-input",{staticClass:"input_item",model:{value:t.form.tele,callback:function(e){t.form.tele=e},expression:"form.tele"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属角色",prop:"roleID"}},[s("el-select",{staticClass:"input_item",model:{value:t.form.roleID,callback:function(e){t.form.roleID=e},expression:"form.roleID"}},t._l(t.roleList,function(t){return s("el-option",{attrs:{label:t.text,value:t.value}})}))],1),t._v(" "),s("el-form-item",{staticClass:"el-form-item_btns"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("返回")])],1)],1):s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[s("el-form-item",{attrs:{label:"账号",prop:"login"}},[s("el-input",{staticClass:"input_item",attrs:{disabled:""},model:{value:t.form.login,callback:function(e){t.form.login=e},expression:"form.login"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"password1"}},[s("el-input",{staticClass:"input_item",attrs:{type:"password"},model:{value:t.form.password1,callback:function(e){t.form.password1=e},expression:"form.password1"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"确认新密码",prop:"password2"}},[s("el-input",{staticClass:"input_item",attrs:{type:"password"},model:{value:t.form.password2,callback:function(e){t.form.password2=e},expression:"form.password2"}})],1),t._v(" "),s("el-form-item",{staticClass:"el-form-item_btns"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("返回")])],1)],1)],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},1283:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"highlight-current-row":"",border:"",stripe:""},on:{"selection-change":t.selectChange}},[s("el-table-column",{attrs:{align:"center",prop:"login",label:"账号","min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"name",label:"姓名","min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"creater",label:"开通点","min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"tele",label:"联系方式","min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"creater",label:"添加人","min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"status",label:"状态","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?s("span",[t._v("已启用")]):s("span",{staticClass:"disable"},[t._v("已停用")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"createTime",label:"添加时间","min-width":"180"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("pg-button-group",[s("pg-button",{attrs:{icon:"chakan"},on:{click:function(s){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),s("pg-button",{attrs:{icon:"xiugai"},on:{click:function(s){t.disable(e.row)}}},[t._v("禁用")]),t._v(" "),s("pg-button",{attrs:{icon:"xiugai"},on:{click:function(s){t.enable(e.row)}}},[t._v("启用")]),t._v(" "),s("pg-button",{attrs:{icon:"xiugai"},on:{click:function(s){t.del(e.row)}}},[t._v("删除")]),t._v(" "),s("pg-button",{attrs:{icon:"xiugai"},on:{click:function(s){t.resetPass(e.row)}}},[t._v("重置密码")])],1)]}}])})],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},1378:function(t,e,s){var i=s(1042);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(16)("77febc88",i,!0)},1398:function(t,e,s){var i=s(1062);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(16)("777d4222",i,!0)},274:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(827),n=s(1231),o=s(2),a=o(i.a,n.a,null,null,null);e.default=a.exports},825:function(t,e,s){"use strict";var i=s(1),n=s.n(i),o=s(974);e.a=n()({},o.a)},826:function(t,e,s){"use strict";var i=s(1),n=s.n(i),o=s(975);e.a=n()({},o.a)},827:function(t,e,s){"use strict";var i=s(1),n=s.n(i),o=s(976);e.a=n()({},o.a)},974:function(t,e,s){"use strict";var i=s(46),n=(s.n(i),s(30));e.a={props:{title:String,show:Boolean,type:Number,editForm:Object},data:function(){return{form:{},initForm:{loginID:"",login:"",name:"",tele:"",roleID:""},resetPassword:{loginID:"",login:"",password:""},roleList:[],rules:{login:[{required:!0,message:"请输入账户",trigger:"blur"}],name:[{required:!0,message:"请输入名字",trigger:"blur"}],tele:[{required:!0,message:"请填写联系方式",trigger:"number"}],roleID:[{required:!0,message:"请选择所属的角色",trigger:"number"}],password1:[{required:!0,message:"请输入新密码",trigger:"number"}],password2:[{required:!0,message:"请再次输入新密码",trigger:"number"}]}}},watch:{editForm:function(t){1===this.type?this.form=s.i(i.cloneDeep)(this.editForm):0===this.type?this.form=s.i(i.cloneDeep)(this.initForm):(this.form=s.i(i.cloneDeep)(this.resetPassword),this.form.loginID=this.editForm.loginID,this.form.login=this.editForm.login)}},mounted:function(){this.getRoleList()},methods:{getRoleList:function(){var t=this;n.a.getRoleList().then(function(e){t.roleList=e})},close:function(){this.$emit("close")},save:function(){var t=this;this.$refs.form.validate(function(e){if(e)if(2!==t.type)n.q.saveAccount(t.form).then(function(){t.$message({message:"保存成功",type:"success"}),t.refresh(),t.close()}).catch(function(e){t.$message.error(e)});else{if(t.form.password1!==t.form.password2)return void t.$message({message:"两次输入的密码不一致",type:"warning"});t.form.password=t.form.password1,n.q.resetPwd(t.form).then(function(){t.$message({message:"重置成功",type:"success"}),t.refresh(),t.close()}).catch(function(e){t.$message.error(e)})}})},refresh:function(){this.$emit("refresh")}}}},975:function(t,e,s){"use strict";s(30);e.a={props:{list:Array},methods:{edit:function(t){this.$emit("edit",t)},disable:function(t){this.$emit("disable",t)},enable:function(t){this.$emit("enable",t)},del:function(t){this.$emit("del",t)},resetPass:function(t){this.$emit("resetPass",t)},selectChange:function(t){this.$emit("select-change",t)}}}},976:function(t,e,s){"use strict";var i=s(1176),n=s(1175),o=s(30);e.a={components:{PgTable:i.a,PgEdit:n.a},data:function(){return{page:1,pageSize:15,total:0,selected:[],editTitle:"编辑",editForm:{},type:0,showEdit:!1,operations:[{name:"新增",action:"add",type:"primary"}],accountList:[]}},mounted:function(){this.getAccountPageList()},methods:{getAccountPageList:function(){var t=this;o.q.getAccountPageList(this.page,this.pageSize).then(function(e){t.accountList=e.data,t.total=e.totalCount})},selectChange:function(t){this.selected=t},currentChange:function(t){this.page=t,this.getAccountPageList()},sizeChange:function(t){this.pageSize=t,this.getAccountPageList()},edit:function(t){var e=this;this.showEdit=!0,this.type=1,this.editTitle="编辑",o.q.getAccountDetail(t.loginID).then(function(t){e.editForm=t}).catch(function(t){e.$message.error(t)})},add:function(){this.showEdit=!0,this.type=0,this.editTitle="新增",this.editForm={}},del:function(t){var e=this;this.$confirm("您确定删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.q.deleteAccount(t.loginID).then(function(){e.$message({message:"删除成功",type:"success"}),e.getAccountPageList()}).catch(function(t){e.$message.error(t)})})},enable:function(t){var e=this;this.$confirm("您确定启用该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.q.enabledAccount(t.loginID).then(function(){e.$message({message:"启用成功",type:"success"}),e.getAccountPageList()}).catch(function(t){e.$message.error(t)})})},disable:function(t){var e=this;this.$confirm("您确定禁用该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.q.disabledAccount(t.loginID).then(function(){e.$message({message:"禁用成功",type:"success"}),e.getAccountPageList()}).catch(function(t){e.$message.error(t)})})},resetPass:function(t){this.showEdit=!0,this.type=2,this.editTitle="重置密码",this.editForm=t},closeEdit:function(){this.showEdit=!1},refresh:function(){this.page=1,this.getAccountPageList()}}}}});
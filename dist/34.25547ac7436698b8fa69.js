webpackJsonp([34],{1185:function(e,t,i){"use strict";var n=i(839),a=i(1277),r=i(2),o=r(n.a,a.a,null,null,null);t.a=o.exports},1186:function(e,t,i){"use strict";var n=i(840),a=i(1218),r=i(2),o=r(n.a,a.a,null,null,null);t.a=o.exports},1218:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":"",border:"",stripe:""},on:{"selection-change":e.selectChange}},[i("el-table-column",{attrs:{align:"center",fixed:"left",type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"gradeName",label:"会员等级",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"name",label:"用户名称",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"mobile",label:"手机号",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"amount",label:"累积消费额",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"cloudCurrency",label:"可用云币",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"chadu",label:"茶都订单",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"paimai",label:"拍卖订单",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"loginType",label:"注册来源",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"createTime",label:"注册时间",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("pg-button",{attrs:{icon:"shanchu"},on:{click:function(i){e.del(t.row)}}},[e._v("删除")])]}}])})],1)},a=[],r={render:n,staticRenderFns:a};t.a=r},1277:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("pg-box",{attrs:{isShowBox:e.show},on:{close:e.close}},[i("div",[i("div",{staticClass:"box_title"},[e._v(e._s(e.title))]),e._v(" "),i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[i("pg-title",{attrs:{title:"新用户"}}),e._v(" "),i("el-form-item",[i("el-checkbox",{model:{value:e.form.newUser,callback:function(t){e.form.newUser=t},expression:"form.newUser"}},[e._v("为首次注册的用户")])],1),e._v(" "),i("pg-title",{attrs:{title:"活跃用户"}}),e._v(" "),i("el-form-item",[i("el-radio",{attrs:{label:"1"},model:{value:e.form.activeUser,callback:function(t){e.form.activeUser=t},expression:"form.activeUser"}},[e._v("最近")]),e._v(" "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.activeTime,callback:function(t){e.form.activeTime=t},expression:"form.activeTime"}}),e._v(" 天内成交次数大于等于 "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.activeTrade,callback:function(t){e.form.activeTrade=t},expression:"form.activeTrade"}})],1),e._v(" "),i("el-form-item",[i("el-radio",{attrs:{label:"2"},model:{value:e.form.activeUser,callback:function(t){e.form.activeUser=t},expression:"form.activeUser"}},[e._v("最近")]),e._v(" "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.activeTime,callback:function(t){e.form.activeTime=t},expression:"form.activeTime"}}),e._v(" 天内登录次数大于等于 "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.activeTrade,callback:function(t){e.form.activeTrade=t},expression:"form.activeTrade"}})],1),e._v(" "),i("pg-title",{attrs:{title:"沉睡用户"}}),e._v(" "),i("el-form-item",[i("el-radio",{attrs:{label:"1"},model:{value:e.form.sleepUser,callback:function(t){e.form.sleepUser=t},expression:"form.sleepUser"}},[e._v("最近")]),e._v(" "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.sleepTime,callback:function(t){e.form.sleepTime=t},expression:"form.sleepTime"}}),e._v(" 天内成交次数大于等于 "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.sleepTrade,callback:function(t){e.form.sleepTrade=t},expression:"form.sleepTrade"}})],1),e._v(" "),i("el-form-item",[i("el-radio",{attrs:{label:"2"},model:{value:e.form.sleepUser,callback:function(t){e.form.sleepUser=t},expression:"form.sleepUser"}},[e._v("最近")]),e._v(" "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.sleepTime,callback:function(t){e.form.sleepTime=t},expression:"form.sleepTime"}}),e._v(" 天内登录次数大于等于 "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.form.sleepTrade,callback:function(t){e.form.sleepTrade=t},expression:"form.sleepTrade"}})],1),e._v(" "),i("br"),e._v(" "),i("el-form-item",{staticClass:"el-form-item_btns"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1)])},a=[],r={render:n,staticRenderFns:a};t.a=r},1303:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"customer"},[i("pg-search-form",{attrs:{"default-form":e.defaultQuery,more:e.moreQuery,"is-show-more":e.isShowMoreQuery},on:{openMore:e.toggleOpen,search:e.search},slot:"search-form",model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),i("div",{staticClass:"pg_content"},[i("pg-operations",{attrs:{btns:e.operations},on:{rank:e.rank,dele:e.dele,exportUser:e.exportUser}}),e._v(" "),i("pg-table",{attrs:{id:"print_table",list:e.customerList},on:{"select-change":e.selectChange,del:e.delUser}}),e._v(" "),i("pg-pagination",{attrs:{"page-size":e.pageSize,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange},slot:"pagination"})],1),e._v(" "),i("pg-edit",{attrs:{title:e.editTitle,show:e.showEdit,isEdit:e.isEdit,editForm:e.editForm},on:{close:e.closeEdit}}),e._v(" "),i("el-dialog",{attrs:{title:"请调整等级",visible:e.rankDialogVisible},on:{"update:visible":function(t){e.rankDialogVisible=t}}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:e.rankChange},model:{value:e.rankValue,callback:function(t){e.rankValue=t},expression:"rankValue"}},e._l(e.rankOptions,function(e){return i("el-option",{key:e.memberGradeID,attrs:{label:e.name,value:e.memberGradeID}})})),e._v(" "),i("p",[e._v("可享受折扣 "+e._s(e.rankDiscount)+" 折")]),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.rankDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.rankSave}},[e._v("确 定")])],1)],1)],1)},a=[],r={render:n,staticRenderFns:a};t.a=r},278:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(841),a=i(1303),r=i(2),o=r(n.a,a.a,null,null,null);t.default=o.exports},839:function(e,t,i){"use strict";var n=i(1),a=i.n(n),r=i(988);t.a=a()({},r.a)},840:function(e,t,i){"use strict";var n=i(1),a=i.n(n),r=i(989);t.a=a()({},r.a)},841:function(e,t,i){"use strict";var n=i(1),a=i.n(n),r=i(990);t.a=a()({},r.a)},988:function(e,t,i){"use strict";var n=i(46);i.n(n);t.a={props:{title:String,show:Boolean,isEdit:Boolean,editForm:Object},data:function(){return{form:{},initForm:{content:"",newUser:"",activeTime:"",activeTrade:"",activeUser:"1",sleepTime:"",sleepTrade:"",sleepUser:"1"},content:"",rules:{}}},watch:{editForm:function(e){this.setForm(this.editForm)}},mounted:function(){this.isEdit||this.resetForm()},created:function(){this.setForm(this.editForm)},methods:{resetForm:function(){this.form=i.i(n.cloneDeep)(this.initForm),this.content=""},setForm:function(e){var t=this;this.isEdit?(this.form=i.i(n.cloneDeep)(this.editForm),this.content=this.form.content):this.resetForm(),this.$nextTick(function(){t.$refs.contentEditor&&t.$refs.contentEditor.updateEditor()})},close:function(){this.$emit("close")},save:function(){void 0==this.form.content&&(this.form.content=this.content),this.$refs.form.validate(function(e){})}}}},989:function(e,t,i){"use strict";i(30);t.a={props:{list:Array},methods:{del:function(e){this.$emit("del",e)},selectChange:function(e){this.$emit("select-change",e)}}}},990:function(e,t,i){"use strict";var n=i(1186),a=i(1185),r=i(30);t.a={components:{PgTable:n.a,PgEdit:a.a},data:function(){return{isShowMoreQuery:!1,query:{name:"",mobile:"",isNew:-1},page:1,pageSize:15,total:0,selected:[],editTitle:"编辑",editForm:{},isEdit:!1,showEdit:!1,isShowGoods:!1,operations:[{name:"批量删除",action:"dele"},{name:"调整等级",action:"rank",type:"primary"},{name:"导出用户",action:"exportUser"}],customerList:[],rankDialogVisible:!1,rankValue:"",rankDiscount:"",rankOptions:[],markDialogVisible:!1,markText:""}},computed:{defaultQuery:{get:function(){return[{type:"select",label:"是否新用户",model:"isNew",text:"text",value:"value",options:[{value:-1,text:"不限"},{value:1,text:"是"},{value:2,text:"否"}]},{type:"input",label:"用户名",model:"name"}]}},moreQuery:{get:function(){return[{type:"input",label:"手机号",model:"mobile"}]}}},mounted:function(){this.getPageList(),this.getLevelPageList()},methods:{toggleOpen:function(e){this.isShowMoreQuery=e},search:function(){this.page=1,this.getPageList()},selectChange:function(e){this.selected=e},currentChange:function(e){this.page=e},sizeChange:function(e){this.pageSize=e},dele:function(){this.selected.length<1?this.$confirm("您还没有选择用户","提示",{showCancelButton:!1,confirmButtonText:"确定",type:"warning"}).then(function(){}).catch(function(){}):this.delUser()},delUser:function(){this.$confirm("删除后用户数据不可恢复，您确认要删除该用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){})},rank:function(){this.selected.length<1?this.$confirm("您还没有选择用户","提示",{showCancelButton:!1,confirmButtonText:"确定",type:"warning"}).then(function(){}).catch(function(){}):this.rankDialogVisible=!0},rankChange:function(){for(var e=0;e<this.rankOptions.length;e++)if(this.rankOptions[e].memberGradeID==this.rankValue){this.rankDiscount=this.rankOptions[e].discount;break}},rankSave:function(){for(var e=this,t=[],i=0;i<this.selected.length;i++){var n=new Object;n.memberID=this.selected[i].memberID,n.memberGradeID=this.rankValue,t.push(n)}this.rankDialogVisible=!1,r.i.modifyLevel(t).then(function(t){e.$message({message:"保存成功",type:"success"}),e.getPageList()})},exportUser:function(){var e=this;r.i.exportCsvUser(this.query,this.page,this.pageSize).then(function(t){e.util.exportFile(t),e.$message({message:"导出成功",type:"success"}).catch(function(t){e.$message.error(t)})})},setUsertype:function(){this.showEdit=!0,this.isEdit=!1,this.editTitle="用户定义设置",this.editForm={}},closeEdit:function(){this.showEdit=!1},getPageList:function(){var e=this;r.i.getPageList(this.query,this.page,this.pageSize).then(function(t){e.total=t.totalCount,e.page=t.page,e.customerList=t.data})},getLevelPageList:function(){var e=this;r.i.getLevelPageList(this.page,this.pageSize).then(function(t){e.rankOptions=t.data,e.rankValue=e.rankOptions[0].memberGradeID,e.rankChange()})}}}}});